(self.webpackChunkant_design_pro=self.webpackChunkant_design_pro||[]).push([[9246],{63258:function(Oe,ne,t){"use strict";t.d(ne,{Z:function(){return ve}});var Pe=t(67294),ie={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M880 298.4H521L403.7 186.2a8.15 8.15 0 00-5.5-2.2H144c-17.7 0-32 14.3-32 32v592c0 17.7 14.3 32 32 32h736c17.7 0 32-14.3 32-32V330.4c0-17.7-14.3-32-32-32zM840 768H184V256h188.5l119.6 114.4H840V768z"}}]},name:"folder",theme:"outlined"},F=ie,se=t(27029),b=function(pe,he){return Pe.createElement(se.Z,Object.assign({},pe,{ref:he,icon:F}))};b.displayName="FolderOutlined";var ve=Pe.forwardRef(b)},15196:function(Oe,ne,t){"use strict";t.d(ne,{UW:function(){return We},ZP:function(){return Me}});var Pe=t(9715),ie=t(86585),F=t(67294),se=t(49111),b=t(19650),ve=t(84305),Ge=t(69224),pe=t(8812),he=t(66758),Ue=t(90240),Se=t(56725),le=t(53621),X=t(94184),U=t.n(X);function ke(l,g){return Ee(l)||h(l,g)||M(l,g)||P()}function P(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function M(l,g){if(!!l){if(typeof l=="string")return j(l,g);var o=Object.prototype.toString.call(l).slice(8,-1);if(o==="Object"&&l.constructor&&(o=l.constructor.name),o==="Map"||o==="Set")return Array.from(l);if(o==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(o))return j(l,g)}}function j(l,g){(g==null||g>l.length)&&(g=l.length);for(var o=0,f=new Array(g);o<g;o++)f[o]=l[o];return f}function h(l,g){var o=l==null?null:typeof Symbol!="undefined"&&l[Symbol.iterator]||l["@@iterator"];if(o!=null){var f=[],T=!0,q=!1,ue,Ce;try{for(o=o.call(l);!(T=(ue=o.next()).done)&&(f.push(ue.value),!(g&&f.length===g));T=!0);}catch(_){q=!0,Ce=_}finally{try{!T&&o.return!=null&&o.return()}finally{if(q)throw Ce}}return f}}function Ee(l){if(Array.isArray(l))return l}function K(l,g){var o=Object.keys(l);if(Object.getOwnPropertySymbols){var f=Object.getOwnPropertySymbols(l);g&&(f=f.filter(function(T){return Object.getOwnPropertyDescriptor(l,T).enumerable})),o.push.apply(o,f)}return o}function at(l){for(var g=1;g<arguments.length;g++){var o=arguments[g]!=null?arguments[g]:{};g%2?K(Object(o),!0).forEach(function(f){He(l,f,o[f])}):Object.getOwnPropertyDescriptors?Object.defineProperties(l,Object.getOwnPropertyDescriptors(o)):K(Object(o)).forEach(function(f){Object.defineProperty(l,f,Object.getOwnPropertyDescriptor(o,f))})}return l}function He(l,g,o){return g in l?Object.defineProperty(l,g,{value:o,enumerable:!0,configurable:!0,writable:!0}):l[g]=o,l}var Je=F.forwardRef(function(l,g){var o=F.useContext(he.Z),f=o.groupProps,T=at(at({},f),l),q=T.children,ue=T.collapsible,Ce=T.defaultCollapsed,_=T.style,ht=T.labelLayout,De=T.title,Le=De===void 0?l.label:De,nt=T.tooltip,Ke=T.align,St=T.direction,Ze=T.size,yt=Ze===void 0?32:Ze,Ve=T.titleStyle,st=T.titleRender,Re=T.extra,de=(0,Se.Z)(function(){return Ce||!1},{value:l.collapsed,onChange:l.onCollapse}),ce=ke(de,2),ge=ce[0],lt=ce[1],oe=(0,F.useContext)(Ge.ZP.ConfigContext),k=oe.getPrefixCls,e=k("pro-form-group"),we=ue&&F.createElement(pe.Z,{style:{marginRight:8},rotate:ge?void 0:90}),Ye=F.createElement(le.Z,{label:we?F.createElement("div",null,we,Le):Le,tooltip:nt}),Be=st?st(Ye,l):Ye,Qe=F.Children.toArray(q).map(function(ee){var me;return F.isValidElement(ee)&&(ee==null||(me=ee.props)===null||me===void 0?void 0:me.hidden)?null:ee});return F.createElement("div",{className:U()(e,He({},"".concat(e,"-twoLine"),ht==="twoLine")),style:_,ref:g},(Le||nt||Re)&&F.createElement("div",{className:"".concat(e,"-title"),style:Ve,onClick:function(){lt(!ge)}},Re?F.createElement("div",{style:{display:"flex",width:"100%",alignItems:"center",justifyContent:"space-between"}},Be,F.createElement("span",{onClick:function(me){return me.stopPropagation()}},Re)):Be),ue&&ge?null:F.createElement(b.Z,{className:"".concat(e,"-container"),size:yt,align:Ke,direction:St},Qe))});Je.displayName="ProForm-Group";var S=Je,C=t(57712),rt=t(59001);function Ae(){return Ae=Object.assign||function(l){for(var g=1;g<arguments.length;g++){var o=arguments[g];for(var f in o)Object.prototype.hasOwnProperty.call(o,f)&&(l[f]=o[f])}return l},Ae.apply(this,arguments)}function ye(l){return F.createElement(C.Z,Ae({layout:"vertical",submitter:{render:function(o,f){return f.reverse()}},contentRender:function(o,f){return F.createElement(F.Fragment,null,o,f)}},l))}ye.Group=S,ye.useForm=ie.Z.useForm,ye.Item=rt.Z;var be=ye,pt=t(64122),We=be.Group,Me=be},53621:function(Oe,ne,t){"use strict";var Pe=t(22385),ie=t(69713),F=t(84305),se=t(69224),b=t(67294),ve=t(68628),Ge=t(37451),pe=t.n(Ge),he=function(Se){var le=Se.label,X=Se.tooltip,U=Se.subTitle,ke=(0,b.useContext)(se.ZP.ConfigContext),P=ke.getPrefixCls;if(!X&&!U)return b.createElement(b.Fragment,null,le);var M=P("pro-core-label-tip"),j=typeof X=="string"||b.isValidElement(X)?{title:X}:X,h=(j==null?void 0:j.icon)||b.createElement(ve.Z,null);return b.createElement("div",{className:M,onMouseDown:function(K){return K.stopPropagation()},onMouseLeave:function(K){return K.stopPropagation()},onMouseMove:function(K){return K.stopPropagation()}},le,U&&b.createElement("div",{className:"".concat(M,"-subtitle")},U),X&&b.createElement(ie.Z,j,b.createElement("span",{className:"".concat(M,"-icon")},h)))};ne.Z=b.memo(he)},15753:function(Oe){Oe.exports={standardList:"standardList___2ofmm",headerInfo:"headerInfo___3_diG",listContent:"listContent___2QxYD",listContentItem:"listContentItem___2mrYb",listContentItem2:"listContentItem2___36iA1",extraContentSearch:"extraContentSearch___1V5gc",listCard:"listCard___3ncDj",standardListForm:"standardListForm___3kWxp",formResult:"formResult___2OXrg"}},90240:function(){},64122:function(){},37451:function(){},70066:function(Oe,ne,t){"use strict";t.r(ne),t.d(ne,{BasicList:function(){return Mt},default:function(){return zt}});var Pe=t(72012),ie=t(39144),F=t(54421),se=t(38272),b=t(94233),ve=t(51890),Ge=t(59250),pe=t(13013),he=t(62350),Ue=t(75443),Se=t(30887),le=t(99210),X=t(57663),U=t(71577),ke=t(74379),P=t(38648),M=t(11849),j=t(3182),h=t(2824),Ee=t(47673),K=t(4107),at=t(88983),He=t(47933),Je=t(94043),S=t.n(Je),C=t(67294),rt={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M484 443.1V528h-84.5c-4.1 0-7.5 3.1-7.5 7v42c0 3.8 3.4 7 7.5 7H484v84.9c0 3.9 3.2 7.1 7 7.1h42c3.9 0 7-3.2 7-7.1V584h84.5c4.1 0 7.5-3.2 7.5-7v-42c0-3.9-3.4-7-7.5-7H540v-84.9c0-3.9-3.1-7.1-7-7.1h-42c-3.8 0-7 3.2-7 7.1zm396-144.7H521L403.7 186.2a8.15 8.15 0 00-5.5-2.2H144c-17.7 0-32 14.3-32 32v592c0 17.7 14.3 32 32 32h736c17.7 0 32-14.3 32-32V330.4c0-17.7-14.3-32-32-32zM840 768H184V256h188.5l119.6 114.4H840V768z"}}]},name:"folder-add",theme:"outlined"},Ae=rt,ye=t(27029),be=function(r,n){return C.createElement(ye.Z,Object.assign({},r,{ref:n,icon:Ae}))};be.displayName="FolderAddOutlined";var pt=C.forwardRef(be),We=t(59879),Me=t(43061),l=t(57254),g=t(63258),o=t(15103),f=t(58086),T=t(30381),q=t(55877);function ue(B){var r=Math.floor(B/1e3),n=Math.floor(r/31536e3);r=r-n*31536e3;var L=Math.floor(r/86400);r=r-L*86400;var N=Math.floor(r/3600);r=r-N*3600;var $=Math.floor(r/60);r=r-$*60;var E="";return r>0&&(E=r+" s"),$>0&&(E=$+" m "+E),N>0&&(E=N+" h "+E),L>0&&(E=L+" d "+E),n>0&&(E=n+" y "+E),E}function Ce(B,r){return B==null||r==null?null:r=="y"?B*31536e6:r=="d"?B*864e5:r=="h"?B*36e5:r=="m"?B*6e4:r=="s"?B*1e3:null}var _={getStringFromMillisecond:ue,getMillisecondFromTimeunit:Ce},ht=t(66456),De=t(85453),Le=t(86582),nt=t(49111),Ke=t(19650),St=t(71153),Ze=t(60331),yt=t(9715),Ve=t(86585),st=t(43358),Re=t(90290),de=t(5966),ce=t(64317),ge=t(37476),lt=t(15753),oe=t.n(lt),k=t(34224),e=t(85893),we=function(r){var n=(0,f.YB)(),L=r.done,N=r.visible,$=r.current,E=r.setCurrent,H=r.onDone,xe=r.children,Fe=r.editable,je=r.setEditable,J=r.changeState,w=r.createable,D=r.setCreateable,V=r.onDeleteItem,y=r.currentValue,z=r.searchTimeseries,G=r.searchContent,te=r.setSearchContent,I=r.pageTimeseriesShowTotal,W=(0,f.tT)("@@initialState"),x=W.initialState,Ct=W.setInitialState,Xe=["BOOLEAN","INT32","INT64","FLOAT","DOUBLE","TEXT"],ot={BOOLEAN:["PLAIN","RLE"],INT32:["PLAIN","RLE","TS_2DIFF","GORILLA"],INT64:["PLAIN","RLE","TS_2DIFF","GORILLA"],FLOAT:["PLAIN","RLE","TS_2DIFF","GORILLA"],DOUBLE:["PLAIN","RLE","TS_2DIFF","GORILLA"],TEXT:["PLAIN"]},Zt=Re.Z.Option,it=Ve.Z.useForm(),Ne=(0,h.Z)(it,2),$e=Ne[0],ut=Ne[1],qe=C.useState(void 0),u=(0,h.Z)(qe,2),Q=u[0],dt=u[1],_e=function(){var O=(0,j.Z)(S().mark(function p(A,fe,Y){var Te,ze,Ie;return S().wrap(function(R){for(;;)switch(R.prev=R.next){case 0:return R.prev=0,R.next=3,Y.validateFields();case 3:return Te=Y.getFieldValue("granularity2"),ze=y+"."+(Te==null?"":Te+".")+Y.getFieldValue("physical2"),R.next=7,(0,k.b2)({path:ze,dataType:Y.getFieldValue("dataType2"),encoding:Y.getFieldValue("encoding2")});case 7:Ie=R.sent,Ie.code=="0"?P.default.success({message:"Add timeseries "+ze+" success"}):P.default.error({message:Ie.message}),R.next=13;break;case 11:R.prev=11,R.t0=R.catch(0);case 13:case"end":return R.stop()}},p,null,[[0,11]])}));return function(A,fe,Y){return O.apply(this,arguments)}}(),et=[{title:n.formatMessage({id:"manageUser.privilege.granularity.entity"}),dataIndex:"granularity",key:"granularity",render:function(p){return(0,e.jsx)(e.Fragment,{children:y+"."+p})}},{title:n.formatMessage({id:"manageUser.privilege.granularity.physical"}),dataIndex:"range",key:"range",render:function(p){return(0,e.jsx)(e.Fragment,{children:(0,e.jsx)("div",{style:{marginBottom:-10},children:p.toString().trim().split(",").map(function(A){return(0,e.jsx)("p",{children:A},A)})})})}},{title:n.formatMessage({id:"createStorageGroup.timeseries.dataType"}),dataIndex:"dataType",key:"dataType",render:function(p){return(0,e.jsx)(e.Fragment,{children:(0,e.jsxs)(Ze.Z,{children:[" ",p," "]})})}},{title:n.formatMessage({id:"createStorageGroup.timeseries.codeMode"}),dataIndex:"encoding",key:"encoding",render:function(p){return(0,e.jsx)(e.Fragment,{children:(0,e.jsxs)(Ze.Z,{children:[" ",p," "]})})}},{title:n.formatMessage({id:"query.sql.export.compressionMode"}),dataIndex:"compression",key:"compression",render:function(p){return(0,e.jsx)(e.Fragment,{children:(0,e.jsxs)(Ze.Z,{children:[" ",p," "]})})}},{title:n.formatMessage({id:"pages.operation.text"}),key:"action",render:function(p,A){return(0,e.jsx)(Ke.Z,{size:"middle",children:(0,e.jsx)(Ue.Z,{placement:"left",title:y+"."+A.granularity+"."+A.range+" -- "+n.formatMessage({id:"pages.delete.confirm"}),onConfirm:function(Y){return V(A,Y)},children:(0,e.jsx)("a",{children:n.formatMessage({id:"pages.delete.text"})})})})}}],xt=[{title:n.formatMessage({id:"manageUser.privilege.granularity.entity"}),dataIndex:"granularity2",key:"granularity2",render:function(p){return(0,e.jsx)(e.Fragment,{children:(0,e.jsx)(de.Z,{name:"granularity2",rules:[{required:!0,message:n.formatMessage({id:"createStorageGroup.entity.description"})},{message:"Between 1 to 1000 character",max:1e3},{pattern:/^(?!\.)[a-zA-Z0-9.\u4e00-\u9fa5_]+$/,message:n.formatMessage({id:"createStorageGroup.entity.rule"})}],fieldProps:{addonBefore:y+"."},placeholder:n.formatMessage({id:"createStorageGroup.entity.description"})})})}},{title:n.formatMessage({id:"manageUser.privilege.granularity.physical"}),dataIndex:"physical2",key:"physical2",render:function(p){return(0,e.jsx)(e.Fragment,{children:(0,e.jsx)(de.Z,{name:"physical2",rules:[{required:!0,message:n.formatMessage({id:"createStorageGroup.physical.description"})},{pattern:/^(?!_)[a-zA-Z0-9\u4e00-\u9fa5_]+$/,message:n.formatMessage({id:"createStorageGroup.physical.rule"})}],fieldProps:{},placeholder:n.formatMessage({id:"createStorageGroup.physical.description"})})})}},{title:n.formatMessage({id:"createStorageGroup.timeseries.dataType"}),dataIndex:"dataType2",key:"dataType2",render:function(p){return(0,e.jsx)(ce.Z,{name:"dataType2",rules:[{required:!0,message:n.formatMessage({id:"createStorageGroup.dataType.description"})}],options:Xe,fieldProps:{onChange:function(fe){dt(fe),$e.setFieldsValue({encoding2:null})}}})}},{title:n.formatMessage({id:"createStorageGroup.timeseries.codeMode"}),dataIndex:"encoding2",key:"encoding2",render:function(p){return(0,e.jsx)(ce.Z,{name:"encoding2",rules:[{required:!0,message:n.formatMessage({id:"createStorageGroup.codeMode.description"})}],options:Q==null?[]:ot[Q],fieldProps:{}})}},{title:n.formatMessage({id:"pages.operation.text"}),key:"action2",render:function(p,A){return(0,e.jsx)(Ke.Z,{size:"middle",style:{marginBottom:25},children:(0,e.jsx)("a",{onClick:function(Y){_e(p,A,$e)},children:n.formatMessage({id:"pages.save.text"})})})}}];return N?(0,e.jsxs)(ge.Z,{visible:N,form:$e,title:n.formatMessage({id:"createStorageGroup.timeseries.detail"})+" -- "+y,className:oe().standardListForm,initialValues:$,submitter:{submitButtonProps:{style:{display:"none"}},render:function(p,A){return[(0,e.jsx)(U.Z,{onClick:function(){D(!w)},children:w?n.formatMessage({id:"pages.cancelAdd.text"}):n.formatMessage({id:"pages.add.text"})},"add")].concat((0,Le.Z)(A))}},trigger:(0,e.jsx)(e.Fragment,{children:xe}),modalProps:{onCancel:function(){return H()},destroyOnClose:!0,bodyStyle:L?{padding:"72px 0"}:{}},children:[(0,e.jsx)("div",{style:{textAlign:"right",marginBottom:"10px",marginTop:"-10px"},children:(0,e.jsxs)(U.Z.Group,{children:[(0,e.jsxs)(U.Z,{value:"all",onClick:function(){te(null),z(y,"")},children:[(0,e.jsx)(We.Z,{}),n.formatMessage({id:"pages.refresh.text"})]}),(0,e.jsx)(K.Z.Search,{style:{width:"220px"},placeholder:n.formatMessage({id:"createStorageGroup.timeseries.search.description"}),onSearch:function(p,A){A.preventDefault(),z(y,p)},onChange:function(p){te(p.target.value)},value:G,addonBefore:y+".",suffix:G==null||G==""?(0,e.jsx)(Me.Z,{style:{display:"none"}}):(0,e.jsx)(Me.Z,{style:{color:"rgba(0,0,0,.45)"},onClick:function(){te(null)}})})]})}),(0,e.jsx)(De.Z,{columns:et,dataSource:$,pagination:{showTotal:I,pageSize:10,showQuickJumper:!0}}),w==!0?(0,e.jsx)(De.Z,{columns:xt,dataSource:[{key:null,granularity2:null,auth2:null}],pagination:{hideOnSinglePage:!0}}):null]}):null},Ye=we,Be=t(15196),Qe=t(31199),ee=function(r){var n=(0,f.YB)(),L=r.addModalVisible,N=r.setAddModalVisible,$=r.initItem,E=r.searchContent,H=r.onDone,xe=_.getMillisecondFromTimeunit,Fe=Ve.Z.useForm(),je=(0,h.Z)(Fe,1),J=je[0];return L?(0,e.jsxs)(ge.Z,{form:J,visible:L,title:n.formatMessage({id:"createStorageGroup.storageGroup.create"}),modalProps:{onCancel:function(){return N(!1)},destroyOnClose:!0,bodyStyle:L?{}:{padding:"72px 0"}},onFinish:function(){var w=(0,j.Z)(S().mark(function D(V){var y,z,G;return S().wrap(function(I){for(;;)switch(I.prev=I.next){case 0:return I.prev=0,I.next=3,J.validateFields();case 3:return y=J.getFieldValue("ttl"),y!=null&&(z=J.getFieldValue("timeunit"),y=xe(y,z)),I.next=7,(0,k.it)({name:"root."+V.name,ttl:y});case 7:G=I.sent,G.code=="0"?(H(V),P.default.success({message:"Add Storage Group root."+V.name+" Success"}),N(!1)):P.default.error({message:G.message}),I.next=13;break;case 11:I.prev=11,I.t0=I.catch(0);case 13:case"end":return I.stop()}},D,null,[[0,11]])}));return function(D){return w.apply(this,arguments)}}(),children:[(0,e.jsx)(de.Z,{name:"name",label:n.formatMessage({id:"createStorageGroup.storageGroup.name"}),rules:[{required:!0,message:"Between 1 to 255 character",max:255,type:"string"},{pattern:/^(?!\.)[a-zA-Z0-9.\u4e00-\u9fa5_]+$/,message:n.formatMessage({id:"createStorageGroup.entity.rule"})}],fieldProps:{addonBefore:"root.",style:{}}}),(0,e.jsxs)(Be.ZP.Group,{size:8,children:[(0,e.jsx)(Qe.Z,{name:"ttl",label:n.formatMessage({id:"createStorageGroup.ttl.text"}),rules:[{min:0,max:925879189194932,type:"number"}],fieldProps:{style:{}}}),(0,e.jsx)(ce.Z,{label:n.formatMessage({id:"createStorageGroup.ttl.timeUnit"}),name:"timeunit",rules:[{validator:function(D,V,y){if(J.getFieldValue("ttl")==null&&V!=null||J.getFieldValue("ttl")!=null&&V==null){y(n.formatMessage({id:"createStorageGroup.ttl.rule"}));return}y()}}],options:[{label:n.formatMessage({id:"createStorageGroup.ttl.second"}),value:"s"},{label:n.formatMessage({id:"createStorageGroup.ttl.minute"}),value:"m"},{label:n.formatMessage({id:"createStorageGroup.ttl.hour"}),value:"h"},{label:n.formatMessage({id:"createStorageGroup.ttl.day"}),value:"d"},{label:n.formatMessage({id:"createStorageGroup.ttl.year"}),value:"y"}],fieldProps:{style:{}}})]})]}):null},me=ee,Bt=function(r){var n=(0,f.YB)(),L=_.getStringFromMillisecond,N=_.getMillisecondFromTimeunit,$=r.editModalVisible,E=r.setEditModalVisible,H=r.editItem,xe=r.initItem,Fe=r.searchContent,je=r.onDone,J=Ve.Z.useForm(),w=(0,h.Z)(J,1),D=w[0];return $?(0,e.jsxs)(ge.Z,{form:D,visible:$,title:n.formatMessage({id:"createStorageGroup.ttl.edit"}),modalProps:{onCancel:function(){return E(!1)},destroyOnClose:!0,bodyStyle:$?{}:{padding:"72px 0"}},onFinish:function(){var V=(0,j.Z)(S().mark(function y(z){var G,te,I;return S().wrap(function(x){for(;;)switch(x.prev=x.next){case 0:return x.prev=0,x.next=3,D.validateFields();case 3:return G=D.getFieldValue("ttl"),G!=null&&(te=D.getFieldValue("timeunit"),G=N(G,te)),x.next=7,(0,k.CV)({name:H.value,ttl:G});case 7:I=x.sent,I.code=="0"?(console.log(z),je((0,M.Z)({name:H.value},z)),P.default.success({message:"Edit Storage Group "+H.value+" Success"}),E(!1)):P.default.error({message:I.message}),x.next=13;break;case 11:x.prev=11,x.t0=x.catch(0);case 13:case"end":return x.stop()}},y,null,[[0,11]])}));return function(y){return V.apply(this,arguments)}}(),children:[(0,e.jsx)(de.Z,{name:"name",label:n.formatMessage({id:"createStorageGroup.storageGroup.name"}),fieldProps:{value:H.value,disabled:"disabled"}}),(0,e.jsx)(de.Z,{label:n.formatMessage({id:"createStorageGroup.ttl.current"}),fieldProps:{defaultValue:L(H.ttl),disabled:"disabled",placeholder:n.formatMessage({id:"createStorageGroup.ttl.unlimited"})}}),(0,e.jsxs)(Be.ZP.Group,{size:8,children:[(0,e.jsx)(Qe.Z,{name:"ttl",label:n.formatMessage({id:"createStorageGroup.ttl.new"})+" "+n.formatMessage({id:"createStorageGroup.ttl.new.description"}),rules:[{min:1,max:925879189194932,type:"number"}],fieldProps:{}}),(0,e.jsx)(ce.Z,{label:n.formatMessage({id:"createStorageGroup.ttl.timeUnit"}),name:"timeunit",rules:[{validator:function(y,z,G){if(D.getFieldValue("ttl")==null&&z!=null||D.getFieldValue("ttl")!=null&&z==null){G(n.formatMessage({id:"createStorageGroup.ttl.rule"}));return}G()}}],options:[{label:n.formatMessage({id:"createStorageGroup.ttl.second"}),value:"s"},{label:n.formatMessage({id:"createStorageGroup.ttl.minute"}),value:"m"},{label:n.formatMessage({id:"createStorageGroup.ttl.hour"}),value:"h"},{label:n.formatMessage({id:"createStorageGroup.ttl.day"}),value:"d"},{label:n.formatMessage({id:"createStorageGroup.ttl.year"}),value:"y"}],fieldProps:{}})]})]}):null},Nt=Bt,Za=He.ZP.Button,$t=K.Z.Search,Mt=function(){var r=(0,f.YB)(),n=(0,C.useState)(!1),L=(0,h.Z)(n,2),N=L[0],$=L[1],E=(0,C.useState)(!1),H=(0,h.Z)(E,2),xe=H[0],Fe=H[1],je=(0,C.useState)(!1),J=(0,h.Z)(je,2),w=J[0],D=J[1],V=(0,C.useState)(!1),y=(0,h.Z)(V,2),z=y[0],G=y[1],te=(0,C.useState)(void 0),I=(0,h.Z)(te,2),W=I[0],x=I[1],Ct=(0,C.useState)(void 0),Xe=(0,h.Z)(Ct,2),ot=Xe[0],Zt=Xe[1],it=(0,C.useState)(void 0),Ne=(0,h.Z)(it,2),$e=Ne[0],ut=Ne[1],qe=(0,f.tT)("@@initialState"),u=qe.initialState,Q=qe.setInitialState,dt=(0,C.useState)(void 0),_e=(0,h.Z)(dt,2),et=_e[0],xt=_e[1],O=(0,C.useState)(void 0),p=(0,h.Z)(O,2),A=p[0],fe=p[1],Y=(0,C.useState)({}),Te=(0,h.Z)(Y,2),ze=Te[0],Ie=Te[1],Ft=(0,C.useState)(void 0),R=(0,h.Z)(Ft,2),Ut=R[0],kt=R[1],Ht=(0,C.useState)(!1),jt=(0,h.Z)(Ht,2),Jt=jt[0],Tt=jt[1],Wt=(0,C.useState)(void 0),It=(0,h.Z)(Wt,2),ae=It[0],ct=It[1],Kt=(0,C.useState)(void 0),Ot=(0,h.Z)(Kt,2),wt=Ot[0],Pt=Ot[1],Yt=(0,C.useState)(!1),Gt=(0,h.Z)(Yt,2),Qt=Gt[0],Et=Gt[1],Xt=(0,C.useState)(void 0),At=(0,h.Z)(Xt,2),qt=At[0],bt=At[1],_t=(0,C.useState)(!1),Dt=(0,h.Z)(_t,2),ea=Dt[0],gt=Dt[1],ta=(0,C.useState)(void 0),Lt=(0,h.Z)(ta,2),aa=Lt[0],mt=Lt[1],ra=_.getStringFromMillisecond,Vt=_.getMillisecondFromTimeunit,ft=(0,f.QT)((0,j.Z)(S().mark(function v(){return S().wrap(function(a){for(;;)switch(a.prev=a.next){case 0:tt();case 1:case"end":return a.stop()}},v)}))),vt=ft.data,na=ft.loading,xa=ft.mutate,sa=function(s){var a=s.data.timeseriesCount;return(0,e.jsx)("div",{className:oe().listContent,children:(0,e.jsx)("div",{className:oe().listContentItem2,children:(0,e.jsx)("p",{})})})},la=function(s){return Qt?(0,e.jsx)("a",{onClick:oa,children:r.formatMessage({id:"pages.loading.continue"})}):null},oa=function(){var v=(0,j.Z)(S().mark(function s(){var a,d,c,m;return S().wrap(function(i){for(;;)switch(i.prev=i.next){case 0:return i.next=2,(0,k.aJ)({token:qt});case 2:if(a=i.sent,a.code=="0"){for(d=JSON.parse(a.message||"{}"),Et(d.hasMore),bt(d.token),c=u.manageStorage_self_total.length,m=0;m<a.data.length;m++)u.manageStorage_self_total[c+m]=a.data[m];ae!=null&&ae!=""?u.manageStorage_self=u.manageStorage_self_total.filter(function(re){return re.value.match(ae)}):u.manageStorage_self=u.manageStorage_self_total,Q((0,M.Z)((0,M.Z)({},u),{},{manageStorage_self:u.manageStorage_self,manageStorage_self_total:u.manageStorage_self_total}))}else P.default.error({message:a.message});case 4:case"end":return i.stop()}},s)}));return function(){return v.apply(this,arguments)}}(),ia=function(s){return ea?(0,e.jsx)("a",{onClick:ua,children:r.formatMessage({id:"pages.loading.continue"})}):null},ua=function(){var v=(0,j.Z)(S().mark(function s(){var a,d,c,m;return S().wrap(function(i){for(;;)switch(i.prev=i.next){case 0:return i.next=2,(0,k.kU)({token:aa});case 2:if(a=i.sent,a.code=="0"){for(d=JSON.parse(a.message||"{}"),gt(d.hasMore),mt(d.token),c=W.length,m=0;m<a.data.length;m++)W[c+m]=a.data[m];x([]),x(W)}else P.default.error({message:a.message});case 4:case"end":return i.stop()}},s)}));return function(){return v.apply(this,arguments)}}(),Fa=(vt==null?void 0:vt.length)||1,da={showTotal:la,showQuickJumper:!0,pageSize:10,current:u.manageStorage_self_current===void 0?1:u.manageStorage_self_current,onChange:function(s,a){Q((0,M.Z)((0,M.Z)({},u),{},{manageStorage_self_current:s}))}},tt=function(){var v=(0,j.Z)(S().mark(function s(a){var d,c,m;return S().wrap(function(i){for(;;)switch(i.prev=i.next){case 0:return d=(0,q.v4)().replaceAll("-",""),i.next=3,(0,k.rk)({token:d});case 3:c=i.sent,c.code=="0"?(m=JSON.parse(c.message||"{}"),Et(m.hasMore),bt(m.token),a!=null&&a!=""&&(c.data=c.data.filter(function(re){return re.value.match(a)})),Q((0,M.Z)((0,M.Z)({},u),{},{manageStorage_self:c.data,manageStorage_self_current:1,manageStorage_self_total:c.data}))):P.default.error({message:c.message});case 5:case"end":return i.stop()}},s)}));return function(a){return v.apply(this,arguments)}}(),Rt=function(){var v=(0,j.Z)(S().mark(function s(a){var d;return S().wrap(function(m){for(;;)switch(m.prev=m.next){case 0:d=u.manageStorage_self_total,a!=null&&a!=""&&(d=d.filter(function(Z){return Z.value.match(a)})),Q((0,M.Z)((0,M.Z)({},u),{},{manageStorage_self:d,manageStorage_self_current:1}));case 3:case"end":return m.stop()}},s)}));return function(a){return v.apply(this,arguments)}}(),ca=function(){var v=(0,j.Z)(S().mark(function s(a){var d,c,m;return S().wrap(function(i){for(;;)switch(i.prev=i.next){case 0:return Pt(null),d=(0,q.v4)().replaceAll("-",""),i.next=4,(0,k.t5)({path:a,token:d});case 4:c=i.sent,c.code=="0"?(m=JSON.parse(c.message||"{}"),gt(m.hasMore),mt(m.token),x(c.data),ut(a),G(!0)):P.default.error({message:c.message});case 6:case"end":return i.stop()}},s)}));return function(a){return v.apply(this,arguments)}}(),ga=function(){var v=(0,j.Z)(S().mark(function s(a,d){var c,m,Z;return S().wrap(function(re){for(;;)switch(re.prev=re.next){case 0:return c=(0,q.v4)().replaceAll("-",""),re.next=3,(0,k.t5)({path:a+"."+d+"*",token:c});case 3:m=re.sent,m.code=="0"?(Z=JSON.parse(m.message||"{}"),gt(Z.hasMore),mt(Z.token),x(m.data)):P.default.error({message:m.message});case 5:case"end":return re.stop()}},s)}));return function(a,d){return v.apply(this,arguments)}}(),ma=function(s){s.preventDefault(),Fe(!0)},fa=function(s,a,d){a[s.key]==null||a[s.key]==!1?(a[s.key]=!0,d((0,M.Z)({},a))):(a[s.key]=!1,d(a),d((0,M.Z)({},a)))},va=function(){var v=(0,j.Z)(S().mark(function s(a){var d,c,m;return S().wrap(function(i){for(;;)switch(i.prev=i.next){case 0:return i.next=2,(0,k.Zm)({name:a.value});case 2:if(d=i.sent,d.code!="0"){i.next=24;break}c=0;case 5:if(!(c<u.manageStorage_self.length)){i.next=12;break}if(u.manageStorage_self[c].value!=a.value){i.next=9;break}return u.manageStorage_self.splice(c,1),i.abrupt("break",12);case 9:c++,i.next=5;break;case 12:m=0;case 13:if(!(m<u.manageStorage_self_total.length)){i.next=20;break}if(u.manageStorage_self_total[m].value!=a.value){i.next=17;break}return u.manageStorage_self_total.splice(m,1),i.abrupt("break",20);case 17:m++,i.next=13;break;case 20:Q((0,M.Z)((0,M.Z)({},u),{},{manageStorage_self:u.manageStorage_self,manageStorage_self_total:u.manageStorage_self_total})),P.default.success({message:"Delete Storage Group "+a.value+" Success"}),i.next=25;break;case 24:P.default.error({message:d.message});case 25:case"end":return i.stop()}},s)}));return function(a){return v.apply(this,arguments)}}(),pa=(0,e.jsxs)(U.Z.Group,{children:[(0,e.jsxs)(U.Z,{value:"all",onClick:function(){ct(null),tt()},children:[(0,e.jsx)(We.Z,{}),r.formatMessage({id:"pages.refresh.text"})]}),(0,e.jsx)($t,{className:oe().extraContentSearch,placeholder:r.formatMessage({id:"pages.refresh.placeholder"}),onSearch:function(s){Rt(s)},onChange:function(s){ct(s.target.value)},value:ae,suffix:ae==null||ae==""?(0,e.jsx)(Me.Z,{style:{display:"none"}}):(0,e.jsx)(Me.Z,{style:{color:"rgba(0,0,0,.45)"},onClick:function(){ct(null)}})})]}),ha=function(s){var a=s.item;return(0,e.jsx)(pe.Z,{trigger:["click"],overlay:(0,e.jsxs)(le.Z,{children:[(0,e.jsx)(le.Z.Item,{onClick:function(){kt(a),D(!0)},children:r.formatMessage({id:"createStorageGroup.ttl.edit"})},"edit"),(0,e.jsx)(Ue.Z,{placement:"left",overlayStyle:{paddingRight:20},title:a.value+" -- "+r.formatMessage({id:"pages.delete.confirm"}),onConfirm:function(c){va(a)},children:(0,e.jsx)(le.Z.Item,{children:r.formatMessage({id:"pages.delete.text"})},"delete")})]}),children:(0,e.jsxs)("a",{children:[r.formatMessage({id:"pages.more.text"})," ",(0,e.jsx)(l.Z,{})]})})},Sa=function(s){var a={timeseriesCount:0,value:"root."+s.name,key:(0,q.v4)().replaceAll("-",""),ttl:Vt(s.ttl,s.timeunit)},d=u.manageStorage_self_total.length;u.manageStorage_self_total[d]=a,Q((0,M.Z)((0,M.Z)({},u),{},{manageStorage_self_total:u.manageStorage_self_total}))},ya=function(s){for(var a=0;a<u.manageStorage_self_total.length;a++)if(u.manageStorage_self_total[a].value==s.name){u.manageStorage_self_total[a].ttl=Vt(s.ttl,s.timeunit),Q((0,M.Z)((0,M.Z)({},u),{},{manageStorage_self_total:u.manageStorage_self_total}));break}},Ma=function(){et==="success"&&Rt(ae),$(!1),G(!1),x({}),ut(null),Ie({}),Tt(!1)},Ca=function(){var v=(0,j.Z)(S().mark(function s(a){var d,c;return S().wrap(function(Z){for(;;)switch(Z.prev=Z.next){case 0:return Z.next=2,(0,k.mp)({path:a.timeseries});case 2:if(d=Z.sent,d.code!="0"){Z.next=17;break}P.default.success({message:"Delete timeseries "+a.timeseries+" success"}),c=0;case 6:if(!(c<W.length)){Z.next=15;break}if(W[c].timeseries!=a.timeseries){Z.next=12;break}return W.splice(c,1),x([]),x(W),Z.abrupt("break",15);case 12:c++,Z.next=6;break;case 15:Z.next=18;break;case 17:P.default.error({message:d.message});case 18:case"end":return Z.stop()}},s)}));return function(a){return v.apply(this,arguments)}}();return(0,e.jsxs)("div",{children:[(0,e.jsx)(o.ZP,{title:u.activeConnectionDesc,children:(0,e.jsx)("div",{className:oe().standardList,children:(0,e.jsx)(ie.Z,{className:oe().listCard,bordered:!1,title:null,style:{marginTop:24},bodyStyle:{padding:"0 32px 40px 32px"},extra:pa,children:(0,e.jsx)(se.ZP,{size:"large",rowKey:"id",loading:na,pagination:da,dataSource:u.manageStorage_self,renderItem:function(s){return(0,e.jsxs)(se.ZP.Item,{actions:[(0,e.jsx)("a",{onClick:function(d){ca(s.value)},children:r.formatMessage({id:"createStorageGroup.timeseries.detail"})},"edit"),(0,e.jsx)(ha,{item:s},"more")],children:[(0,e.jsx)(se.ZP.Item.Meta,{avatar:(0,e.jsx)(ve.C,{style:{backgroundColor:"#FC4C2F"},icon:(0,e.jsx)(g.Z,{}),shape:"square",size:"large"}),title:s.value,description:s.ttl==null?"":r.formatMessage({id:"createStorageGroup.ttl.text"})+" "+ra(s.ttl)}),(0,e.jsx)(sa,{data:s})]})}})})})}),(0,e.jsxs)(U.Z,{type:"dashed",onClick:function(s){ma(s,{})},style:{width:"100%",marginBottom:8},children:[(0,e.jsx)(pt,{}),r.formatMessage({id:"createStorageGroup.storageGroup.create"})]}),(0,e.jsx)(Ye,{done:N,doneResultStatus:et,doneResultTitle:A,visible:z,current:W,setCurrent:x,currentFiltered:ot,setCurrentFiltered:Zt,currentValue:$e,onDone:Ma,onDeleteItem:Ca,editable:ze,setEditable:Ie,createable:Jt,setCreateable:Tt,changeState:fa,searchContent:wt,setSearchContent:Pt,searchTimeseries:ga,pageTimeseriesShowTotal:ia}),(0,e.jsx)(me,{addModalVisible:xe,setAddModalVisible:Fe,initItem:tt,searchContent:ae,onDone:Sa}),(0,e.jsx)(Nt,{editModalVisible:w,setEditModalVisible:D,editItem:Ut,initItem:tt,searchContent:ae,onDone:ya})]})},zt=Mt}}]);
