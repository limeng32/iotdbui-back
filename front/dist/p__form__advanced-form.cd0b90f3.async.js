(self.webpackChunkant_design_pro=self.webpackChunkant_design_pro||[]).push([[8529],{64317:function(re,X,r){"use strict";var ne=r(22122),L=r(28991),te=r(81253),M=r(22270),N=r(67294),F=r(66758),ae=r(64473),le=["fieldProps","children","params","proFieldProps","mode","valueEnum","request","showSearch","options"],q=["fieldProps","children","params","proFieldProps","mode","valueEnum","request","options"],fe=N.forwardRef(function(u,t){var T=u.fieldProps,c=u.children,I=u.params,U=u.proFieldProps,O=u.mode,w=u.valueEnum,G=u.request,Y=u.showSearch,J=u.options,k=(0,te.Z)(u,le),z=(0,N.useContext)(F.Z);return N.createElement(ae.Z,(0,ne.Z)({mode:"edit",valueEnum:(0,M.h)(w),request:G,params:I,valueType:"select",filedConfig:{customLightMode:!0},fieldProps:(0,L.Z)({options:J,mode:O,showSearch:Y,getPopupContainer:z.getPopupContainer},T),ref:t,proFieldProps:U},k),c)}),oe=N.forwardRef(function(u,t){var T=u.fieldProps,c=u.children,I=u.params,U=u.proFieldProps,O=u.mode,w=u.valueEnum,G=u.request,Y=u.options,J=(0,te.Z)(u,q),k=(0,L.Z)({options:Y,mode:O||"multiple",labelInValue:!0,showSearch:!0,showArrow:!1,autoClearSearchValue:!0,optionLabelProp:"label"},T),z=(0,N.useContext)(F.Z);return N.createElement(ae.Z,(0,ne.Z)({mode:"edit",valueEnum:(0,M.h)(w),request:G,params:I,valueType:"select",filedConfig:{customLightMode:!0},fieldProps:(0,L.Z)({getPopupContainer:z.getPopupContainer},k),ref:t,proFieldProps:U},J),c)}),ie=fe,ue=oe,V=ie;V.SearchSelect=ue,V.displayName="ProFormComponent",X.Z=V},5393:function(re){re.exports={card:"card___1dsH6",errorIcon:"errorIcon___3jptF",anticon:"anticon___A0Hdx",errorPopover:"errorPopover___FGjVx",errorListItem:"errorListItem___1rmVg",errorField:"errorField___2Y7eW",editable:"editable___WRDur"}},70378:function(re,X,r){"use strict";r.r(X),r.d(X,{default:function(){return nr}});var ne=r(58024),L=r(39144),te=r(13062),M=r(71230),N=r(89032),F=r(15746),ae=r(34792),le=r(48086),q=r(3182),fe=r(20136),oe=r(55241),ie=r(2824),ue=r(94043),V=r.n(ue),u=r(73218),t=r(67294),T=r(22122),c=r(28991),I=r(81253),U=r(86190),O=r(66758),w=r(64473),G=["fieldProps","proFieldProps"],Y="dateRange",J=t.forwardRef(function(e,v){var h=e.fieldProps,P=e.proFieldProps,E=(0,I.Z)(e,G),S=(0,t.useContext)(O.Z);return t.createElement(w.Z,(0,T.Z)({ref:v,mode:"edit",fieldProps:(0,c.Z)({getPopupContainer:S.getPopupContainer},h),valueType:Y,proFieldProps:P,filedConfig:{valueType:Y,lightFilterLabelFormatter:function(C){return(0,U.Z)(C,(h==null?void 0:h.format)||"YYYY-MM-DD")}}},E))}),k=J,z=["fieldProps","proFieldProps"],je=["fieldProps","proFieldProps"],he="time",De=t.forwardRef(function(e,v){var h=e.fieldProps,P=e.proFieldProps,E=(0,I.Z)(e,z),S=(0,t.useContext)(O.Z);return t.createElement(w.Z,(0,T.Z)({ref:v,mode:"edit",fieldProps:(0,c.Z)({getPopupContainer:S.getPopupContainer},h),valueType:"timeRange",proFieldProps:P,filedConfig:{valueType:"timeRange",lightFilterLabelFormatter:function(C){return(0,U.Z)(C,"HH:mm:SS")}}},E))}),Se=function(v){var h=v.fieldProps,P=v.proFieldProps,E=(0,I.Z)(v,je),S=(0,t.useContext)(O.Z);return t.createElement(w.Z,(0,T.Z)({mode:"edit",fieldProps:(0,c.Z)({getPopupContainer:S.getPopupContainer},h),valueType:he,proFieldProps:P,filedConfig:{customLightMode:!0,valueType:he}},E))},ge=Se;ge.RangePicker=De;var Be=ge,pe=r(952),_=r(5966),H=r(64317),hr=r(9715),Ie=r(86835),gr=r(57663),Ve=r(71577),Ae=r(96156),Le=r(28481),Pe=r(55507),Me=r(92137),Ne=r(49101),Oe=r(97462),we=r(26369),Ze=r(22270),Ke=r(48171),$e=r(60249),We=r(48526),Ue=r(21770),Ye=r(88306),Fe=r(8880),He=r(86938),Ge=["onTableChange","maxLength","formItemProps","recordCreatorProps","rowKey","controlled","defaultValue","onChange","editableFormRef"],Je=["record","position","creatorButtonText","newRecordType","parentKey","style"],xe=t.createContext(void 0);function Ee(e){var v=e.children,h=e.record,P=e.position,E=e.newRecordType,S=e.parentKey,j=(0,t.useContext)(xe);return t.cloneElement(v,(0,c.Z)((0,c.Z)({},v.props),{},{onClick:function(){var C=(0,Me.Z)((0,Pe.Z)().mark(function D(R){var x,B,d,Z;return(0,Pe.Z)().wrap(function(b){for(;;)switch(b.prev=b.next){case 0:return b.next=2,(x=(B=v.props).onClick)===null||x===void 0?void 0:x.call(B,R);case 2:if(Z=b.sent,Z!==!1){b.next=5;break}return b.abrupt("return");case 5:j==null||(d=j.current)===null||d===void 0||d.addEditRecord(h,{position:P,newRecordType:E,parentKey:S});case 6:case"end":return b.stop()}},D)}));function ee(D){return C.apply(this,arguments)}return ee}()}))}function ye(e){var v,h,P=e.onTableChange,E=e.maxLength,S=e.formItemProps,j=e.recordCreatorProps,C=e.rowKey,ee=e.controlled,D=e.defaultValue,R=e.onChange,x=e.editableFormRef,B=(0,I.Z)(e,Ge),d=(0,we.Z)(e.value),Z=(0,t.useRef)(),m=(0,t.useRef)();(0,t.useImperativeHandle)(B.actionRef,function(){return Z.current});var b=(0,Ue.Z)(function(){return e.value||D||[]},{value:e.value,onChange:e.onChange}),Re=(0,Le.Z)(b,2),s=Re[0],tr=Re[1],K=t.useMemo(function(){return typeof C=="function"?C:function(f,a){return f[C]||a}},[C]),be=function(a){if(typeof a=="number"&&!e.name){if(a>=s.length)return a;var o=s==null?void 0:s.at(a);return K==null?void 0:K(o,a)}if((typeof a=="string"||a>=s.length)&&e.name){var l=s.findIndex(function(i,g){var p;return(K==null||(p=K(i,g))===null||p===void 0?void 0:p.toString())===(a==null?void 0:a.toString())});return l}return a};(0,t.useImperativeHandle)(x,function(){var f=function(l){var i,g;if(l==null)throw new Error("rowIndex is required");var p=be(l),W=[e.name,(i=p==null?void 0:p.toString())!==null&&i!==void 0?i:""].flat(1).filter(Boolean);return(g=m.current)===null||g===void 0?void 0:g.getFieldValue(W)},a=function(){var l,i=[e.name].flat(1).filter(Boolean);if(Array.isArray(i)&&i.length===0){var g,p=(g=m.current)===null||g===void 0?void 0:g.getFieldsValue();return Array.isArray(p)?p:Object.keys(p).map(function(W){return p[W]})}return(l=m.current)===null||l===void 0?void 0:l.getFieldValue(i)};return(0,c.Z)((0,c.Z)({},m.current),{},{getRowData:f,getRowsData:a,setRowData:function(l,i){var g,p,W,me;if(l==null)throw new Error("rowIndex is required");var ce=be(l),mr=[e.name,(g=ce==null?void 0:ce.toString())!==null&&g!==void 0?g:""].flat(1).filter(Boolean),cr=((p=m.current)===null||p===void 0||(W=p.getFieldsValue)===null||W===void 0?void 0:W.call(p))||{},fr=(0,Fe.Z)(cr,mr,(0,c.Z)((0,c.Z)({},f(l)),i||{}));return(me=m.current)===null||me===void 0?void 0:me.setFieldsValue(fr)}})}),(0,t.useEffect)(function(){!e.controlled||s.forEach(function(f,a){var o;(o=m.current)===null||o===void 0||o.setFieldsValue((0,Ae.Z)({},K(f,a),f))},{})},[s,e.controlled]),(0,t.useEffect)(function(){if(e.name){var f;m.current=e==null||(f=e.editable)===null||f===void 0?void 0:f.form}},[(v=e.editable)===null||v===void 0?void 0:v.form,e.name]);var $=j||{},ar=$.record,se=$.position,lr=$.creatorButtonText,or=$.newRecordType,ir=$.parentKey,ur=$.style,dr=(0,I.Z)($,Je),Te=se==="top",Q=(0,t.useMemo)(function(){return E&&E<=(s==null?void 0:s.length)?!1:j!==!1&&t.createElement(Ee,{record:(0,Ze.h)(ar,s==null?void 0:s.length,s)||{},position:se,parentKey:(0,Ze.h)(ir,s==null?void 0:s.length,s),newRecordType:or},t.createElement(Ve.Z,(0,T.Z)({type:"dashed",style:(0,c.Z)({display:"block",margin:"10px 0",width:"100%"},ur),icon:t.createElement(Ne.Z,null)},dr),lr||"\u6DFB\u52A0\u4E00\u884C\u6570\u636E"))},[j,E,s==null?void 0:s.length]),sr=(0,t.useMemo)(function(){return Q?Te?{components:{header:{wrapper:function(a){var o,l=a.className,i=a.children;return t.createElement("thead",{className:l},i,t.createElement("tr",{style:{position:"relative"}},t.createElement("td",{colSpan:0,style:{visibility:"hidden"}},Q),t.createElement("td",{style:{position:"absolute",left:0,width:"100%"},colSpan:(o=B.columns)===null||o===void 0?void 0:o.length},Q)))}}}}:{tableViewRender:function(a,o){var l,i;return t.createElement(t.Fragment,null,(l=(i=e.tableViewRender)===null||i===void 0?void 0:i.call(e,a,o))!==null&&l!==void 0?l:o,Q)}}:{}},[Te,Q]),ve=(0,c.Z)({},e.editable),vr=(0,Ke.J)(function(f,a){var o,l,i;if((o=e.editable)===null||o===void 0||(l=o.onValuesChange)===null||l===void 0||l.call(o,f,a),(i=e.onValuesChange)===null||i===void 0||i.call(e,a,f),e.controlled){var g;e==null||(g=e.onChange)===null||g===void 0||g.call(e,a)}});return((e==null?void 0:e.onValuesChange)||((h=e.editable)===null||h===void 0?void 0:h.onValuesChange)||e.controlled&&(e==null?void 0:e.onChange))&&(ve.onValuesChange=vr),t.createElement(t.Fragment,null,t.createElement(xe.Provider,{value:Z},t.createElement(He.Z,(0,T.Z)({search:!1,options:!1,pagination:!1,rowKey:C,revalidateOnFocus:!1},B,sr,{tableLayout:"fixed",actionRef:Z,onChange:P,editable:(0,c.Z)((0,c.Z)({},ve),{},{formProps:(0,c.Z)({formRef:m},ve.formProps)}),dataSource:s,onDataSourceChange:function(a){if(tr(a),e.name&&se==="top"){var o,l=(0,Fe.Z)({},[e.name].flat(1).filter(Boolean),a);(o=m.current)===null||o===void 0||o.setFieldsValue(l)}}}))),e.name?t.createElement(Oe.Z,{name:[e.name]},function(f){var a,o,l=(0,Ye.Z)(f,[e.name].flat(1)),i=l==null?void 0:l.find(function(g,p){return!(0,$e.Z)(g,d==null?void 0:d[p])});return i&&(e==null||(a=e.editable)===null||a===void 0||(o=a.onValuesChange)===null||o===void 0||o.call(a,i,l)),null}):null)}function Ce(e){return e.name?t.createElement(Ie.Z.Item,(0,T.Z)({style:{maxWidth:"100%"}},e==null?void 0:e.formItemProps,{name:e.name}),t.createElement(We.Field,{shouldUpdate:!0,name:e.name,isList:!0},function(v,h,P){return t.createElement(ye,(0,T.Z)({},e,{editable:(0,c.Z)((0,c.Z)({},e.editable),{},{form:P}),value:v.value||[],onChange:v.onChange}))})):t.createElement(ye,e)}Ce.RecordCreator=Ee;var ke=Ce,ze=r(85224),Qe=r(75362),Xe=r(21010);function qe(e){return de.apply(this,arguments)}function de(){return de=(0,q.Z)(V().mark(function e(v){return V().wrap(function(P){for(;;)switch(P.prev=P.next){case 0:return P.abrupt("return",(0,Xe.WY)("/api/advancedForm",{method:"POST",data:v}));case 1:case"end":return P.stop()}},e)})),de.apply(this,arguments)}var _e=r(5393),A=r.n(_e),n=r(85893),y={name:"\u4ED3\u5E93\u540D",url:"\u4ED3\u5E93\u57DF\u540D",owner:"\u4ED3\u5E93\u7BA1\u7406\u5458",approver:"\u5BA1\u6279\u4EBA",dateRange:"\u751F\u6548\u65E5\u671F",type:"\u4ED3\u5E93\u7C7B\u578B",name2:"\u4EFB\u52A1\u540D",url2:"\u4EFB\u52A1\u63CF\u8FF0",owner2:"\u6267\u884C\u4EBA",approver2:"\u8D23\u4EFB\u4EBA",dateRange2:"\u751F\u6548\u65E5\u671F",type2:"\u4EFB\u52A1\u7C7B\u578B"},er=[{key:"1",workId:"00001",name:"John Brown",department:"New York No. 1 Lake Park"},{key:"2",workId:"00002",name:"Jim Green",department:"London No. 1 Lake Park"},{key:"3",workId:"00003",name:"Joe Black",department:"Sidney No. 1 Lake Park"}],rr=function(){var v=(0,t.useState)([]),h=(0,ie.Z)(v,2),P=h[0],E=h[1],S=function(R){var x=R.filter(function(Z){return Z.errors.length>0}).length;if(!R||x===0)return null;var B=function(m){var b=document.querySelector('label[for="'.concat(m,'"]'));b&&b.scrollIntoView(!0)},d=R.map(function(Z){if(!Z||Z.errors.length===0)return null;var m=Z.name[0];return(0,n.jsxs)("li",{className:A().errorListItem,onClick:function(){return B(m)},children:[(0,n.jsx)(u.Z,{className:A().errorIcon}),(0,n.jsx)("div",{className:A().errorMessage,children:Z.errors[0]}),(0,n.jsx)("div",{className:A().errorField,children:y[m]})]},m)});return(0,n.jsxs)("span",{className:A().errorIcon,children:[(0,n.jsx)(oe.Z,{title:"\u8868\u5355\u6821\u9A8C\u4FE1\u606F",content:d,overlayClassName:A().errorPopover,trigger:"click",getPopupContainer:function(m){return m&&m.parentNode?m.parentNode:m},children:(0,n.jsx)(u.Z,{})}),x]})},j=function(){var D=(0,q.Z)(V().mark(function R(x){return V().wrap(function(d){for(;;)switch(d.prev=d.next){case 0:return E([]),d.prev=1,d.next=4,qe(x);case 4:le.default.success("\u63D0\u4EA4\u6210\u529F"),d.next=9;break;case 7:d.prev=7,d.t0=d.catch(1);case 9:case"end":return d.stop()}},R,null,[[1,7]])}));return function(x){return D.apply(this,arguments)}}(),C=function(R){E(R.errorFields)},ee=[{title:"\u6210\u5458\u59D3\u540D",dataIndex:"name",key:"name",width:"20%"},{title:"\u5DE5\u53F7",dataIndex:"workId",key:"workId",width:"20%"},{title:"\u6240\u5C5E\u90E8\u95E8",dataIndex:"department",key:"department",width:"40%"},{title:"\u64CD\u4F5C",key:"action",valueType:"option",render:function(R,x,B,d){return[(0,n.jsx)("a",{onClick:function(){d==null||d.startEditable(x.key)},children:"\u7F16\u8F91"},"eidit")]}}];return(0,n.jsx)(pe.ZP,{layout:"vertical",hideRequiredMark:!0,submitter:{render:function(R,x){return(0,n.jsxs)(ze.Z,{children:[S(P),x]})}},initialValues:{members:er},onFinish:j,onFinishFailed:C,children:(0,n.jsxs)(Qe.ZP,{content:"\u9AD8\u7EA7\u8868\u5355\u5E38\u89C1\u4E8E\u4E00\u6B21\u6027\u8F93\u5165\u548C\u63D0\u4EA4\u5927\u6279\u91CF\u6570\u636E\u7684\u573A\u666F\u3002",children:[(0,n.jsxs)(L.Z,{title:"\u4ED3\u5E93\u7BA1\u7406",className:A().card,bordered:!1,children:[(0,n.jsxs)(M.Z,{gutter:16,children:[(0,n.jsx)(F.Z,{lg:6,md:12,sm:24,children:(0,n.jsx)(_.Z,{label:y.name,name:"name",rules:[{required:!0,message:"\u8BF7\u8F93\u5165\u4ED3\u5E93\u540D\u79F0"}],placeholder:"\u8BF7\u8F93\u5165\u4ED3\u5E93\u540D\u79F0"})}),(0,n.jsx)(F.Z,{xl:{span:6,offset:2},lg:{span:8},md:{span:12},sm:24,children:(0,n.jsx)(_.Z,{label:y.url,name:"url",rules:[{required:!0,message:"\u8BF7\u9009\u62E9"}],fieldProps:{style:{width:"100%"},addonBefore:"http://",addonAfter:".com"},placeholder:"\u8BF7\u8F93\u5165"})}),(0,n.jsx)(F.Z,{xl:{span:8,offset:2},lg:{span:10},md:{span:24},sm:24,children:(0,n.jsx)(H.Z,{label:y.owner,name:"owner",rules:[{required:!0,message:"\u8BF7\u9009\u62E9\u7BA1\u7406\u5458"}],options:[{label:"\u4ED8\u6653\u6653",value:"xiao"},{label:"\u5468\u6BDB\u6BDB",value:"mao"}],placeholder:"\u8BF7\u9009\u62E9\u7BA1\u7406\u5458"})})]}),(0,n.jsxs)(M.Z,{gutter:16,children:[(0,n.jsx)(F.Z,{lg:6,md:12,sm:24,children:(0,n.jsx)(H.Z,{label:y.approver,name:"approver",rules:[{required:!0,message:"\u8BF7\u9009\u62E9\u5BA1\u6279\u5458"}],options:[{label:"\u4ED8\u6653\u6653",value:"xiao"},{label:"\u5468\u6BDB\u6BDB",value:"mao"}],placeholder:"\u8BF7\u9009\u62E9\u7BA1\u7406\u5458"})}),(0,n.jsx)(F.Z,{xl:{span:6,offset:2},lg:{span:8},md:{span:12},sm:24,children:(0,n.jsx)(k,{label:y.dateRange,name:"dateRange",fieldProps:{style:{width:"100%"}},rules:[{required:!0,message:"\u8BF7\u9009\u62E9\u751F\u6548\u65E5\u671F"}]})}),(0,n.jsx)(F.Z,{xl:{span:8,offset:2},lg:{span:10},md:{span:24},sm:24,children:(0,n.jsx)(H.Z,{label:y.type,name:"type",rules:[{required:!0,message:"\u8BF7\u9009\u62E9\u4ED3\u5E93\u7C7B\u578B"}],options:[{label:"\u79C1\u5BC6",value:"private"},{label:"\u516C\u5F00",value:"public"}],placeholder:"\u8BF7\u9009\u62E9\u4ED3\u5E93\u7C7B\u578B"})})]})]}),(0,n.jsxs)(L.Z,{title:"\u4EFB\u52A1\u7BA1\u7406",className:A().card,bordered:!1,children:[(0,n.jsxs)(M.Z,{gutter:16,children:[(0,n.jsx)(F.Z,{lg:6,md:12,sm:24,children:(0,n.jsx)(_.Z,{label:y.name2,name:"name2",rules:[{required:!0,message:"\u8BF7\u8F93\u5165"}]})}),(0,n.jsx)(F.Z,{xl:{span:6,offset:2},lg:{span:8},md:{span:12},sm:24,children:(0,n.jsx)(_.Z,{label:y.url2,name:"url2",rules:[{required:!0,message:"\u8BF7\u9009\u62E9"}]})}),(0,n.jsx)(F.Z,{xl:{span:8,offset:2},lg:{span:10},md:{span:24},sm:24,children:(0,n.jsx)(H.Z,{label:y.owner2,name:"owner2",rules:[{required:!0,message:"\u8BF7\u9009\u62E9\u7BA1\u7406\u5458"}],options:[{label:"\u4ED8\u6653\u6653",value:"xiao"},{label:"\u5468\u6BDB\u6BDB",value:"mao"}]})})]}),(0,n.jsxs)(M.Z,{gutter:16,children:[(0,n.jsx)(F.Z,{lg:6,md:12,sm:24,children:(0,n.jsx)(H.Z,{label:y.approver2,name:"approver2",rules:[{required:!0,message:"\u8BF7\u9009\u62E9\u5BA1\u6279\u5458"}],options:[{label:"\u4ED8\u6653\u6653",value:"xiao"},{label:"\u5468\u6BDB\u6BDB",value:"mao"}],placeholder:"\u8BF7\u9009\u62E9\u5BA1\u6279\u5458"})}),(0,n.jsx)(F.Z,{xl:{span:6,offset:2},lg:{span:8},md:{span:12},sm:24,children:(0,n.jsx)(Be,{label:y.dateRange2,name:"dateRange2",rules:[{required:!0,message:"\u8BF7\u8F93\u5165"}],placeholder:"\u63D0\u9192\u65F6\u95F4",fieldProps:{style:{width:"100%"}}})}),(0,n.jsx)(F.Z,{xl:{span:8,offset:2},lg:{span:10},md:{span:24},sm:24,children:(0,n.jsx)(H.Z,{label:y.type2,name:"type2",rules:[{required:!0,message:"\u8BF7\u9009\u62E9\u4ED3\u5E93\u7C7B\u578B"}],options:[{label:"\u79C1\u5BC6",value:"private"},{label:"\u516C\u5F00",value:"public"}],placeholder:"\u8BF7\u9009\u62E9\u4ED3\u5E93\u7C7B\u578B"})})]})]}),(0,n.jsx)(L.Z,{title:"\u6210\u5458\u7BA1\u7406",bordered:!1,children:(0,n.jsx)(pe.ZP.Item,{name:"members",children:(0,n.jsx)(ke,{recordCreatorProps:{record:function(){return{key:"0".concat(Date.now())}}},columns:ee,rowKey:"key"})})})]})})},nr=rr}}]);
