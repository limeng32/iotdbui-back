(self.webpackChunkant_design_pro=self.webpackChunkant_design_pro||[]).push([[30],{17147:function(ze){ze.exports={standardList:"standardList___1iFxq",headerInfo:"headerInfo___2aqDv",listContent:"listContent___1IATF",listContentItem:"listContentItem___5bVCU",listContentItem2:"listContentItem2___2qaIk",extraContentSearch:"extraContentSearch___11gEB",listCard:"listCard___YcctT",standardListForm:"standardListForm___3g1HM",formResult:"formResult___2BFy5"}},30331:function(ze,Ye,i){"use strict";i.r(Ye),i.d(Ye,{BasicList:function(){return st},default:function(){return qt}});var va=i(72012),mt=i(39144),pa=i(54421),Se=i(38272),Sa=i(94233),ht=i(51890),ya=i(59250),vt=i(13013),Ca=i(62350),He=i(75443),xa=i(30887),ye=i(99210),ja=i(57663),Q=i(71577),Za=i(74379),M=i(38648),G=i(11849),R=i(3182),C=i(2824),Ea=i(47673),Je=i(4107),Ua=i(88983),pt=i(47933),St=i(94043),h=i.n(St),m=i(67294),yt={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M824.2 699.9a301.55 301.55 0 00-86.4-60.4C783.1 602.8 812 546.8 812 484c0-110.8-92.4-201.7-203.2-200-109.1 1.7-197 90.6-197 200 0 62.8 29 118.8 74.2 155.5a300.95 300.95 0 00-86.4 60.4C345 754.6 314 826.8 312 903.8a8 8 0 008 8.2h56c4.3 0 7.9-3.4 8-7.7 1.9-58 25.4-112.3 66.7-153.5A226.62 226.62 0 01612 684c60.9 0 118.2 23.7 161.3 66.8C814.5 792 838 846.3 840 904.3c.1 4.3 3.7 7.7 8 7.7h56a8 8 0 008-8.2c-2-77-33-149.2-87.8-203.9zM612 612c-34.2 0-66.4-13.3-90.5-37.5a126.86 126.86 0 01-37.5-91.8c.3-32.8 13.4-64.5 36.3-88 24-24.6 56.1-38.3 90.4-38.7 33.9-.3 66.8 12.9 91 36.6 24.8 24.3 38.4 56.8 38.4 91.4 0 34.2-13.3 66.3-37.5 90.5A127.3 127.3 0 01612 612zM361.5 510.4c-.9-8.7-1.4-17.5-1.4-26.4 0-15.9 1.5-31.4 4.3-46.5.7-3.6-1.2-7.3-4.5-8.8-13.6-6.1-26.1-14.5-36.9-25.1a127.54 127.54 0 01-38.7-95.4c.9-32.1 13.8-62.6 36.3-85.6 24.7-25.3 57.9-39.1 93.2-38.7 31.9.3 62.7 12.6 86 34.4 7.9 7.4 14.7 15.6 20.4 24.4 2 3.1 5.9 4.4 9.3 3.2 17.6-6.1 36.2-10.4 55.3-12.4 5.6-.6 8.8-6.6 6.3-11.6-32.5-64.3-98.9-108.7-175.7-109.9-110.9-1.7-203.3 89.2-203.3 199.9 0 62.8 28.9 118.8 74.2 155.5-31.8 14.7-61.1 35-86.5 60.4-54.8 54.7-85.8 126.9-87.8 204a8 8 0 008 8.2h56.1c4.3 0 7.9-3.4 8-7.7 1.9-58 25.4-112.3 66.7-153.5 29.4-29.4 65.4-49.8 104.7-59.7 3.9-1 6.5-4.7 6-8.7z"}}]},name:"team",theme:"outlined"},Ct=yt,We=i(27029),Ke=function(e,a){return m.createElement(We.Z,Object.assign({},e,{ref:a,icon:Ct}))};Ke.displayName="TeamOutlined";var xt=m.forwardRef(Ke),jt={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M892 772h-80v-80c0-4.4-3.6-8-8-8h-48c-4.4 0-8 3.6-8 8v80h-80c-4.4 0-8 3.6-8 8v48c0 4.4 3.6 8 8 8h80v80c0 4.4 3.6 8 8 8h48c4.4 0 8-3.6 8-8v-80h80c4.4 0 8-3.6 8-8v-48c0-4.4-3.6-8-8-8zM373.5 498.4c-.9-8.7-1.4-17.5-1.4-26.4 0-15.9 1.5-31.4 4.3-46.5.7-3.6-1.2-7.3-4.5-8.8-13.6-6.1-26.1-14.5-36.9-25.1a127.54 127.54 0 01-38.7-95.4c.9-32.1 13.8-62.6 36.3-85.6 24.7-25.3 57.9-39.1 93.2-38.7 31.9.3 62.7 12.6 86 34.4 7.9 7.4 14.7 15.6 20.4 24.4 2 3.1 5.9 4.4 9.3 3.2 17.6-6.1 36.2-10.4 55.3-12.4 5.6-.6 8.8-6.6 6.3-11.6-32.5-64.3-98.9-108.7-175.7-109.9-110.8-1.7-203.2 89.2-203.2 200 0 62.8 28.9 118.8 74.2 155.5-31.8 14.7-61.1 35-86.5 60.4-54.8 54.7-85.8 126.9-87.8 204a8 8 0 008 8.2h56.1c4.3 0 7.9-3.4 8-7.7 1.9-58 25.4-112.3 66.7-153.5 29.4-29.4 65.4-49.8 104.7-59.7 3.8-1.1 6.4-4.8 5.9-8.8zM824 472c0-109.4-87.9-198.3-196.9-200C516.3 270.3 424 361.2 424 472c0 62.8 29 118.8 74.2 155.5a300.95 300.95 0 00-86.4 60.4C357 742.6 326 814.8 324 891.8a8 8 0 008 8.2h56c4.3 0 7.9-3.4 8-7.7 1.9-58 25.4-112.3 66.7-153.5C505.8 695.7 563 672 624 672c110.4 0 200-89.5 200-200zm-109.5 90.5C690.3 586.7 658.2 600 624 600s-66.3-13.3-90.5-37.5a127.26 127.26 0 01-37.5-91.8c.3-32.8 13.4-64.5 36.3-88 24-24.6 56.1-38.3 90.4-38.7 33.9-.3 66.8 12.9 91 36.6 24.8 24.3 38.4 56.8 38.4 91.4-.1 34.2-13.4 66.3-37.6 90.5z"}}]},name:"usergroup-add",theme:"outlined"},Zt=jt,Qe=function(e,a){return m.createElement(We.Z,Object.assign({},e,{ref:a,icon:Zt}))};Qe.displayName="UsergroupAddOutlined";var Et=m.forwardRef(Qe),Xe=i(59879),le=i(43061),Ut=i(57254),Mt=i(15103),V=i(58086),Ma=i(30381),Pt=i(55877),Pa=i(66456),qe=i(85453),Ot=i(86582),Oa=i(49111),_e=i(19650),Ta=i(71153),Tt=i(60331),Ra=i(63185),et=i(9676),Fa=i(9715),Ce=i(82482),Ia=i(43358),Rt=i(90290),Ft=i(64317),te=i(5966),It=i(31864),bt=i(22270),tt=i(61834),At=["options","fieldProps","proFieldProps","valueEnum"];function ue(){return ue=Object.assign||function(l){for(var e=1;e<arguments.length;e++){var a=arguments[e];for(var n in a)Object.prototype.hasOwnProperty.call(a,n)&&(l[n]=a[n])}return l},ue.apply(this,arguments)}function at(l,e){var a=Object.keys(l);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(l);e&&(n=n.filter(function(v){return Object.getOwnPropertyDescriptor(l,v).enumerable})),a.push.apply(a,n)}return a}function kt(l){for(var e=1;e<arguments.length;e++){var a=arguments[e]!=null?arguments[e]:{};e%2?at(Object(a),!0).forEach(function(n){wt(l,n,a[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(l,Object.getOwnPropertyDescriptors(a)):at(Object(a)).forEach(function(n){Object.defineProperty(l,n,Object.getOwnPropertyDescriptor(a,n))})}return l}function wt(l,e,a){return e in l?Object.defineProperty(l,e,{value:a,enumerable:!0,configurable:!0,writable:!0}):l[e]=a,l}function Dt(l,e){if(l==null)return{};var a=Gt(l,e),n,v;if(Object.getOwnPropertySymbols){var Z=Object.getOwnPropertySymbols(l);for(v=0;v<Z.length;v++)n=Z[v],!(e.indexOf(n)>=0)&&(!Object.prototype.propertyIsEnumerable.call(l,n)||(a[n]=l[n]))}return a}function Gt(l,e){if(l==null)return{};var a={},n=Object.keys(l),v,Z;for(Z=0;Z<n.length;Z++)v=n[Z],!(e.indexOf(v)>=0)&&(a[v]=l[v]);return a}var $t=m.forwardRef(function(l,e){var a=l.options,n=l.fieldProps,v=l.proFieldProps,Z=l.valueEnum,$=Dt(l,At);return m.createElement(It.ZP,ue({ref:e,valueType:"checkbox",mode:"edit",valueEnum:(0,bt.h)(Z,void 0)},$,{fieldProps:kt({options:a},n)},v))}),Lt=m.forwardRef(function(l,e){var a=l.fieldProps,n=l.children;return m.createElement(et.Z,ue({ref:e},a),n)}),Bt=(0,tt.Z)(Lt,{valuePropName:"checked"}),Nt=(0,tt.Z)($t),rt=Bt;rt.Group=Nt;var nt=rt,xe=i(37476),Vt=i(17147),ae=i.n(Vt),k=i(34224),t=i(85893),zt=Je.Z.Search,Yt=function(e){var a=(0,V.YB)(),n=e.done,v=e.visible,Z=e.current,$=e.onDone,B=e.children,F=e.editable,b=e.setEditable,N=e.changeState,I=e.createable,A=e.setCreateable,L=e.onSaveAuth,U=e.onDeleteAuth,E=e.currentUser,Me=e.tosave,oe=e.unsave,Pe=e.pagePrivilegesShowTotal,Oe=e.pagePrivilegesHasMore,p=e.pagePrivilegesAppend,w=e.currentFiltered,it=e.setCurrentFiltered,de=e.refresh,Te=e.search,P=e.searchContent,ce=e.setSearchContent,fe=e.onAddDone,z=(0,V.tT)("@@initialState"),Re=z.initialState,Fe=z.setInitialState,D=["SET_STORAGE_GROUP","INSERT_TIMESERIES","READ_TIMESERIES","CREATE_TIMESERIES","DELETE_TIMESERIES","CREATE_USER","DELETE_USER","MODIFY_PASSWORD","LIST_USER","GRANT_USER_PRIVILEGE","REVOKE_USER_PRIVILEGE","CREATE_FUNCTION","DROP_FUNCTION","CREATE_TRIGGER","DROP_TRIGGER","START_TRIGGER","STOP_TRIGGER"],X=["INSERT_TIMESERIES","READ_TIMESERIES","CREATE_TIMESERIES","DELETE_TIMESERIES"],lt=Rt.Z.Option,ge=Ce.Z.useForm(),me=(0,C.Z)(ge,1),Ie=me[0],be=m.useState(void 0),re=(0,C.Z)(be,2),q=re[0],Ae=re[1],ke=m.useState(void 0),ne=(0,C.Z)(ke,2),_=ne[0],Y=ne[1],we=m.useState(void 0),se=(0,C.Z)(we,2),ie=se[0],ee=se[1],De=function(g){Y(null),ee(null),Ae(g)},he=function(){var j=(0,R.Z)(h().mark(function g(f,x,S){var pe,H,J;return h().wrap(function(O){for(;;)switch(O.prev=O.next){case 0:return O.prev=0,O.next=3,S.validateFields();case 3:return pe="root",O.next=6,(0,k.PU)({user:E,auth:ie,timeseries:_});case 6:H=O.sent,H.code=="0"?(J=JSON.parse(H.message||"{}"),fe(J),M.default.success({message:J.range+' add "'+J.success+'" success'})):M.default.error({message:H.message}),O.next=12;break;case 10:O.prev=10,O.t0=O.catch(0);case 12:case"end":return O.stop()}},g,null,[[0,10]])}));return function(f,x,S){return j.apply(this,arguments)}}(),Ge=[{title:a.formatMessage({id:"manageUser.privilege.level"}),dataIndex:"depth",key:"depth",render:function(g){return(0,t.jsx)(t.Fragment,{children:g})}},{title:a.formatMessage({id:"manageUser.privilege.range"}),dataIndex:"range",key:"range",render:function(g){return(0,t.jsx)(t.Fragment,{children:(0,t.jsx)("div",{style:{marginBottom:-10},children:g.toString().trim().split(",").map(function(f){return(0,t.jsx)("p",{children:f},f)})})})}},{title:a.formatMessage({id:"manageUser.privilege.auth"}),key:"auth",dataIndex:"auth",render:function(g,f){return F[f.key]==!0?(0,t.jsx)(t.Fragment,{children:(0,t.jsx)(et.Z.Group,{defaultValue:g,options:f.range=="root"?D:X,onChange:function(S){f.auth=S}})}):(0,t.jsx)(t.Fragment,{children:g.map(function(x){return(0,t.jsx)(Tt.Z,{children:x},x)})})}},{title:a.formatMessage({id:"pages.operation.text"}),key:"action",render:function(g,f){return(0,t.jsxs)(_e.Z,{size:"middle",children:[F[f.key]==!0?(0,t.jsx)("a",{onClick:function(S){L(f,S)},children:a.formatMessage({id:"pages.save.text"})}):(0,t.jsx)("a",{onClick:function(S){Me(g,F,b)},children:a.formatMessage({id:"pages.edit.text"})}),F[f.key]==!0?(0,t.jsx)("a",{onClick:function(S){oe(g,F,b)},children:a.formatMessage({id:"pages.cancel.text"})}):(0,t.jsx)(He.Z,{placement:"left",title:f.range+" -- "+a.formatMessage({id:"manageUser.privilege.delete.confirm"}),onConfirm:function(S){return U(f,S)},children:(0,t.jsx)("a",{children:a.formatMessage({id:"pages.delete.text"})})})]})}}],ve=[{title:a.formatMessage({id:"manageUser.privilege.granularity"}),dataIndex:"granularity2",key:"granularity2",render:function(g,f){return(0,t.jsx)(Ft.Z,{name:"granularity2",rules:[{required:!0,message:a.formatMessage({id:"pages.required.text"})}],options:[{label:a.formatMessage({id:"manageUser.privilege.granularity.connection"}),value:"connection"},{label:a.formatMessage({id:"manageUser.privilege.granularity.timeseries"}),value:"timeseries"}],fieldProps:{onChange:function(S){De(S),f.granularity2=S},value:q,style:{width:100}},placeholder:a.formatMessage({id:"pages.choose.placeholder"})})}},{title:a.formatMessage({id:"manageUser.privilege.range"}),dataIndex:"range2",key:"range2",render:function(g,f){return q=="timeseries"?(0,t.jsx)(te.Z,{name:"range2",rules:[{required:!0,message:"Between 1 to 255 character",max:255,type:"string"},{pattern:/^(?!\.)[a-zA-Z0-9.\u4e00-\u9fa5_]+$/,message:a.formatMessage({id:"createStorageGroup.entity.rule"})}],onChange:function(S){Y(S.target.value)},fieldProps:{value:_,addonBefore:"root.",style:{width:300}}}):null}},{title:a.formatMessage({id:"manageUser.privilege.auth"}),key:"auth2",dataIndex:"auth2",render:function(g,f){return(0,t.jsx)("div",{style:{},children:q==null?null:q=="connection"?(0,t.jsx)(nt.Group,{defaultValue:g,options:D,onChange:function(S){f.auth2=S,ee(S)},fieldProps:{value:ie},name:"auth2",rules:[{required:!0,message:a.formatMessage({id:"manageUser.privilege.auth.required"}),type:"array"}]}):(0,t.jsx)(nt.Group,{defaultValue:g,options:X,onChange:function(S){f.auth2=S,ee(S)},fieldProps:{value:ie},name:"auth3",rules:[{required:!0,message:a.formatMessage({id:"manageUser.privilege.auth.required"}),type:"array"}]})})}},{title:a.formatMessage({id:"pages.operation.text"}),key:"action2",render:function(g,f){return(0,t.jsx)(_e.Z,{size:"middle",children:(0,t.jsx)("a",{onClick:function(S){he(g,f,Ie)},children:a.formatMessage({id:"pages.save.text"})})})}}];return v?(0,t.jsxs)(xe.Z,{visible:v,form:Ie,title:a.formatMessage({id:"manageUser.privilege.detail"})+" -- "+E,className:ae().standardListForm,submitter:{submitButtonProps:{style:{display:"none"}},render:function(g,f){return[(0,t.jsx)(Q.Z,{onClick:function(){Ae(null),Y(null),ee([]),A(!I)},children:I?a.formatMessage({id:"pages.cancelAdd.text"}):a.formatMessage({id:"pages.add.text"})},"add")].concat((0,Ot.Z)(f))}},trigger:(0,t.jsx)(t.Fragment,{children:B}),modalProps:{onCancel:function(){return $()},destroyOnClose:!0,bodyStyle:n?{padding:"72px 0"}:{}},children:[(0,t.jsx)("div",{style:{textAlign:"right",marginBottom:"10px",marginTop:"-10px"},children:(0,t.jsxs)(Q.Z.Group,{children:[(0,t.jsxs)(Q.Z,{value:"all",onClick:function(){de()},children:[(0,t.jsx)(Xe.Z,{}),a.formatMessage({id:"pages.refresh.text"})]}),(0,t.jsx)(zt,{className:ae().extraContentSearch,placeholder:a.formatMessage({id:"pages.refresh.placeholder"}),onSearch:function(g){Te(g)},onChange:function(g){ce(g.target.value)},value:P,suffix:P==null||P==""?(0,t.jsx)(le.Z,{style:{display:"none"}}):(0,t.jsx)(le.Z,{style:{color:"rgba(0,0,0,.45)"},onClick:function(){ce(null)}})})]})}),(0,t.jsx)(qe.Z,{columns:Ge,dataSource:w,pagination:{pageSize:10,showQuickJumper:!0,showTotal:Pe}}),I==!0?(0,t.jsx)(qe.Z,{columns:ve,dataSource:[{key:null,granularity2:null,auth2:null}],pagination:{hideOnSinglePage:!0}}):null]}):null},Ht=Yt,Jt=function(e){var a=(0,V.YB)(),n=e.addUserVisible,v=e.setAddUserVisible,Z=e.initUser,$=e.searchContent,B=Ce.Z.useForm(),F=(0,C.Z)(B,1),b=F[0];return n?(0,t.jsxs)(xe.Z,{form:b,visible:n,title:a.formatMessage({id:"manageUser.create.title"}),modalProps:{onCancel:function(){return v(!1)},destroyOnClose:!0,bodyStyle:n?{}:{padding:"72px 0"}},onFinish:function(){var N=(0,R.Z)(h().mark(function I(A){var L;return h().wrap(function(E){for(;;)switch(E.prev=E.next){case 0:return E.prev=0,E.next=3,b.validateFields();case 3:return E.next=5,(0,k.fU)({user:A.userName,password:A.userPassword});case 5:L=E.sent,L.code=="0"?(Z($),M.default.success({message:"Add User "+A.userName+" Success"}),v(!1)):M.default.error({message:L.message}),E.next=11;break;case 9:E.prev=9,E.t0=E.catch(0);case 11:case"end":return E.stop()}},I,null,[[0,9]])}));return function(I){return N.apply(this,arguments)}}(),children:[(0,t.jsx)(te.Z,{name:"userName",label:a.formatMessage({id:"manageUser.create.username"}),rules:[{required:!0,message:"Between 4 to 255 character",min:4,max:255,type:"string"}]}),(0,t.jsx)(te.Z.Password,{name:"userPassword",label:a.formatMessage({id:"manageUser.create.password"}),rules:[{required:!0,message:"Between 4 to 255 character",min:4,max:255,type:"string"}]})]}):null},Wt=Jt,Kt=function(e){var a=(0,V.YB)(),n=e.editUserVisible,v=e.setEditUserVisible,Z=e.editUser,$=Ce.Z.useForm(),B=(0,C.Z)($,1),F=B[0];return n?(0,t.jsxs)(xe.Z,{form:F,visible:n,title:a.formatMessage({id:"manageUser.edit.title"}),modalProps:{onCancel:function(){return v(!1)},destroyOnClose:!0,bodyStyle:n?{}:{padding:"72px 0"}},onFinish:function(){var b=(0,R.Z)(h().mark(function N(I){var A;return h().wrap(function(U){for(;;)switch(U.prev=U.next){case 0:return U.prev=0,U.next=3,F.validateFields();case 3:return U.next=5,(0,k.gL)({user:Z.user,password:I.userPassword});case 5:A=U.sent,A.code=="0"?(M.default.success({message:"Edit User "+I.userName+" Success"}),v(!1)):M.default.error({message:A.message}),U.next=11;break;case 9:U.prev=9,U.t0=U.catch(0);case 11:case"end":return U.stop()}},N,null,[[0,9]])}));return function(N){return b.apply(this,arguments)}}(),children:[(0,t.jsx)(te.Z,{label:a.formatMessage({id:"manageUser.create.username"}),fieldProps:{defaultValue:Z.user,disabled:"disabled"},rules:[{required:!0,message:"Between 4 to 255 character",min:4,max:255,type:"string"}]}),(0,t.jsx)(te.Z.Password,{name:"userPassword",label:a.formatMessage({id:"manageUser.create.password"}),rules:[{required:!0,message:"Between 4 to 255 character",min:4,max:255,type:"string"}]})]}):null},Qt=Kt;function ba(l){return je.apply(this,arguments)}function je(){return je=_asyncToGenerator(_regeneratorRuntime.mark(function l(e){return _regeneratorRuntime.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.abrupt("return",request("/api/get_list",{params:e}));case 1:case"end":return n.stop()}},l)})),je.apply(this,arguments)}function Aa(l){return Ze.apply(this,arguments)}function Ze(){return Ze=_asyncToGenerator(_regeneratorRuntime.mark(function l(e){return _regeneratorRuntime.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.abrupt("return",request("/api/post_fake_list",{method:"POST",data:_objectSpread(_objectSpread({},e),{},{method:"delete"})}));case 1:case"end":return n.stop()}},l)})),Ze.apply(this,arguments)}function ka(l){return Ee.apply(this,arguments)}function Ee(){return Ee=_asyncToGenerator(_regeneratorRuntime.mark(function l(e){return _regeneratorRuntime.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.abrupt("return",request("/api/post_fake_list",{method:"POST",data:_objectSpread(_objectSpread({},e),{},{method:"post"})}));case 1:case"end":return n.stop()}},l)})),Ee.apply(this,arguments)}function wa(l){return Ue.apply(this,arguments)}function Ue(){return Ue=_asyncToGenerator(_regeneratorRuntime.mark(function l(e){return _regeneratorRuntime.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.abrupt("return",request("/api/post_fake_list",{method:"POST",data:_objectSpread(_objectSpread({},e),{},{method:"update"})}));case 1:case"end":return n.stop()}},l)})),Ue.apply(this,arguments)}var Da=pt.ZP.Button,Xt=Je.Z.Search,Ga=function(e){var a=e.data,n=a.createTime,v=a.username;return _jsxs("div",{className:styles.listContent,children:[_jsxs("div",{className:styles.listContentItem,children:[_jsx("p",{children:"\u7528\u6237\u540D"}),_jsx("p",{children:v})]}),_jsxs("div",{className:styles.listContentItem2,children:[_jsx("p",{children:"\u521B\u5EFA\u65F6\u95F4"}),_jsx("p",{children:moment(parseInt(n)).format("YYYY-MM-DD HH:mm")})]})]})},st=function(){var e=(0,V.YB)(),a=(0,m.useState)(!1),n=(0,C.Z)(a,2),v=n[0],Z=n[1],$=(0,m.useState)(!1),B=(0,C.Z)($,2),F=B[0],b=B[1],N=(0,m.useState)(!1),I=(0,C.Z)(N,2),A=I[0],L=I[1],U=(0,m.useState)(!1),E=(0,C.Z)(U,2),Me=E[0],oe=E[1],Pe=(0,m.useState)(void 0),Oe=(0,C.Z)(Pe,2),p=Oe[0],w=Oe[1],it=(0,m.useState)(void 0),de=(0,C.Z)(it,2),Te=de[0],P=de[1],ce=(0,m.useState)(void 0),fe=(0,C.Z)(ce,2),z=fe[0],Re=fe[1],Fe=(0,V.tT)("@@initialState"),D=Fe.initialState,X=Fe.setInitialState,lt=(0,m.useState)(void 0),ge=(0,C.Z)(lt,2),me=ge[0],Ie=ge[1],be=(0,m.useState)(void 0),re=(0,C.Z)(be,2),q=re[0],Ae=re[1],ke=(0,m.useState)({}),ne=(0,C.Z)(ke,2),_=ne[0],Y=ne[1],we=(0,m.useState)(void 0),se=(0,C.Z)(we,2),ie=se[0],ee=se[1],De=(0,m.useState)(!1),he=(0,C.Z)(De,2),Ge=he[0],ve=he[1],j=(0,m.useState)(void 0),g=(0,C.Z)(j,2),f=g[0],x=g[1],S=(0,m.useState)(!1),pe=(0,C.Z)(S,2),H=pe[0],J=pe[1],ut=(0,m.useState)(void 0),O=(0,C.Z)(ut,2),_t=O[0],ot=O[1],ea=(0,m.useState)(void 0),dt=(0,C.Z)(ea,2),W=dt[0],ct=dt[1],$e=(0,V.QT)((0,R.Z)(h().mark(function c(){return h().wrap(function(r){for(;;)switch(r.prev=r.next){case 0:Be();case 1:case"end":return r.stop()}},c)}))),Le=$e.data,ta=$e.loading,$a=$e.mutate,La=(Le==null?void 0:Le.length)||1,aa={showQuickJumper:!0,pageSize:10,current:D.manageUser_self_current===void 0?1:D.manageUser_self_current,onChange:function(s,r){X((0,G.Z)((0,G.Z)({},D),{},{manageUser_self_current:s}))}},ra=function(s){return H?(0,t.jsx)("a",{onClick:ft,children:e.formatMessage({id:"pages.loading.continue"})}):null},ft=function(){var c=(0,R.Z)(h().mark(function s(){var r,u,d,o;return h().wrap(function(T){for(;;)switch(T.prev=T.next){case 0:return T.next=2,(0,k.M_)({token:_t});case 2:if(r=T.sent,r.code=="0"){for(u=JSON.parse(r.message||"{}"),J(u.hasMore),ot(u.token),r.data.filter(function(K){K.authOrigin=K.auth}),d=p.length,o=0;o<r.data.length;o++)p[d+o]=r.data[o];w([]),w(p),P([]),W!=null&&W!=""?P(p.filter(function(K){return K.range.match(W)})):P(p)}else M.default.error({message:r.message});case 4:case"end":return T.stop()}},s)}));return function(){return c.apply(this,arguments)}}(),Be=function(){var c=(0,R.Z)(h().mark(function s(r){var u;return h().wrap(function(o){for(;;)switch(o.prev=o.next){case 0:return o.next=2,(0,k.uj)();case 2:u=o.sent,u.code=="0"?(r!=null&&r!=""&&(u.data=u.data.filter(function(y){return y.user.match(r)})),X((0,G.Z)((0,G.Z)({},D),{},{manageUser_self:u.data,manageUser_self_totalCount:u.data.length,manageUser_self_current:1}))):M.default.error({message:u.message});case 4:case"end":return o.stop()}},s)}));return function(r){return c.apply(this,arguments)}}(),Ne=function(){var c=(0,R.Z)(h().mark(function s(r){var u;return h().wrap(function(o){for(;;)switch(o.prev=o.next){case 0:return o.next=2,(0,k.uj)();case 2:u=o.sent,u.code=="0"?(r!=null&&r!=""&&(u.data=u.data.filter(function(y){return y.user.match(r)})),X((0,G.Z)((0,G.Z)({},D),{},{manageUser_self:u.data,manageUser_self_totalCount:u.data.length,manageUser_self_current:1}))):M.default.error({message:u.message});case 4:case"end":return o.stop()}},s)}));return function(r){return c.apply(this,arguments)}}(),na=function(){var c=(0,R.Z)(h().mark(function s(r){var u;return h().wrap(function(o){for(;;)switch(o.prev=o.next){case 0:return o.next=2,gt(r.user);case 2:u=o.sent,u.code=="0"&&(Re(r.user),oe(!0));case 4:case"end":return o.stop()}},s)}));return function(r){return c.apply(this,arguments)}}(),sa=function(s){s.preventDefault(),b(!0)},Ve=function(s,r,u){r[s.key]==null||r[s.key]==!1?(r[s.key]=!0,u((0,G.Z)({},r))):(r[s.key]=!1,u((0,G.Z)({},r)))},ia=function(s,r,u){s.authOrigin=s.auth,Ve(s,r,u)},la=function(s,r,u){s.auth=s.authOrigin,Ve(s,r,u)},ua=function(){var c=(0,R.Z)(h().mark(function s(r){var u;return h().wrap(function(o){for(;;)switch(o.prev=o.next){case 0:return o.next=2,(0,k.o1)({user:r.user});case 2:u=o.sent,u.code=="0"?(Be(f),M.default.success({message:"Delete User "+r.user+" Success"})):M.default.error({message:u.message});case 4:case"end":return o.stop()}},s)}));return function(r){return c.apply(this,arguments)}}(),oa=(0,t.jsxs)(Q.Z.Group,{children:[(0,t.jsxs)(Q.Z,{value:"all",onClick:function(){x(null),Ne()},children:[(0,t.jsx)(Xe.Z,{}),e.formatMessage({id:"pages.refresh.text"})]}),(0,t.jsx)(Xt,{className:ae().extraContentSearch,placeholder:e.formatMessage({id:"pages.refresh.placeholder"}),onSearch:function(s){Ne(s)},onChange:function(s){x(s.target.value)},value:f,suffix:f==null||f==""?(0,t.jsx)(le.Z,{style:{display:"none"}}):(0,t.jsx)(le.Z,{style:{color:"rgba(0,0,0,.45)"},onClick:function(){x(null)}})})]}),da=function(s){var r=s.item;return(0,t.jsx)(vt.Z,{trigger:["click"],overlay:(0,t.jsxs)(ye.Z,{children:[(0,t.jsx)(ye.Z.Item,{onClick:function(){ee(r),L(!0)},children:e.formatMessage({id:"pages.edit.text"})},"edit"),(0,t.jsx)(He.Z,{placement:"left",overlayStyle:{paddingRight:20},title:r.user+" -- "+e.formatMessage({id:"pages.delete.confirm"}),onConfirm:function(d){ua(r)},okText:"\u662F",cancelText:"\u5426",children:(0,t.jsx)(ye.Z.Item,{children:e.formatMessage({id:"pages.delete.text"})},"delete")})]}),children:(0,t.jsxs)("a",{children:[e.formatMessage({id:"pages.more.text"})," ",(0,t.jsx)(Ut.Z,{})]})})},ca=function(){me==="success"&&Ne(f),Z(!1),oe(!1),w([]),Re(null),Y({}),ve(!1)},fa=function(){var c=(0,R.Z)(h().mark(function s(r){var u,d;return h().wrap(function(y){for(;;)switch(y.prev=y.next){case 0:return y.next=2,(0,k.Gn)({user:z,range:r.range});case 2:if(u=y.sent,u.code!="0"){y.next=18;break}d=0;case 5:if(!(d<p.length)){y.next=16;break}if(p[d].range!=r.range){y.next=13;break}return p.splice(d,1),w([]),w(p),P([]),W!=null&&W!=""?P(p.filter(function(T){return T.range.match(W)})):P(p),y.abrupt("break",16);case 13:d++,y.next=5;break;case 16:y.next=19;break;case 18:M.default.error({message:u.message});case 19:case"end":return y.stop()}},s)}));return function(r){return c.apply(this,arguments)}}(),ga=function(){var c=(0,R.Z)(h().mark(function s(r,u){var d;return h().wrap(function(y){for(;;)switch(y.prev=y.next){case 0:return y.next=2,(0,k.Gn)({user:z,auth:r.auth,range:r.range});case 2:d=y.sent,d.code=="0"?(_[r.key]=!1,Y((0,G.Z)({},_))):M.default.error({message:d.message});case 4:case"end":return y.stop()}},s)}));return function(r,u){return c.apply(this,arguments)}}(),gt=function(){var c=(0,R.Z)(h().mark(function s(r){var u,d,o;return h().wrap(function(T){for(;;)switch(T.prev=T.next){case 0:return ct(null),u=(0,Pt.v4)().replaceAll("-",""),T.next=4,(0,k.f9)({user:r==null?z:r,token:u});case 4:return d=T.sent,d.code=="0"?(o=JSON.parse(d.message||"{}"),J(o.hasMore),ot(o.token),d.data.filter(function(K){K.authOrigin=K.auth}),w(d.data),P(d.data)):M.default.error({message:d.message}),T.abrupt("return",d);case 7:case"end":return T.stop()}},s)}));return function(r){return c.apply(this,arguments)}}(),ma=function(){var c=(0,R.Z)(h().mark(function s(r){return h().wrap(function(d){for(;;)switch(d.prev=d.next){case 0:P([]),P(p.filter(function(o){return o.range.match(r)}));case 2:case"end":return d.stop()}},s)}));return function(r){return c.apply(this,arguments)}}(),ha=function(s){for(var r=0;r<p.length;r++)if(p[r].range==s.range){p[r].auth.push.apply(p[r].auth,s.success),p[r].authOrigin.push.apply(p[r].authOrigin,s.success),p[r].auth=p[r].auth.reduce(function(u,d){return u.indexOf(d)===-1&&u.push(d),u},[]),p[r].authOrigin=p[r].authOrigin.reduce(function(u,d){return u.indexOf(d)===-1&&u.push(d),u},[]),w([]),w(p);break}};return(0,t.jsxs)("div",{children:[(0,t.jsx)(Mt.ZP,{title:D.activeConnectionDesc,children:(0,t.jsx)("div",{className:ae().standardList,children:(0,t.jsx)(mt.Z,{className:ae().listCard,bordered:!1,title:null,style:{marginTop:24},bodyStyle:{padding:"0 32px 40px 32px"},extra:oa,children:(0,t.jsx)(Se.ZP,{size:"large",rowKey:"id",loading:ta,pagination:aa,dataSource:D.manageUser_self,renderItem:function(s){return(0,t.jsx)(Se.ZP.Item,{actions:[(0,t.jsx)("a",{onClick:function(){na(s)},children:e.formatMessage({id:"manageUser.privilege.detail"})},"edit"),(0,t.jsx)(da,{item:s},"more")],children:(0,t.jsx)(Se.ZP.Item.Meta,{avatar:(0,t.jsx)(ht.C,{style:{backgroundColor:"#FC4C2F"},icon:(0,t.jsx)(xt,{}),shape:"square",size:"large"}),title:s.user,description:null})})}})})})}),(0,t.jsxs)(Q.Z,{type:"dashed",onClick:function(s){sa(s,{})},style:{width:"100%",marginBottom:8},children:[(0,t.jsx)(Et,{}),e.formatMessage({id:"manageUser.create.title"})]}),(0,t.jsx)(Ht,{done:v,doneResultStatus:me,doneResultTitle:q,visible:Me,current:p,currentFiltered:Te,setCurrentFiltered:P,currentUser:z,onDone:ca,onSaveAuth:ga,onDeleteAuth:fa,editable:_,setEditable:Y,createable:Ge,setCreateable:ve,changeState:Ve,tosave:ia,unsave:la,pagePrivilegesShowTotal:ra,pagePrivilegesHasMore:H,pagePrivilegesAppend:ft,refresh:gt,search:ma,searchContent:W,setSearchContent:ct,onAddDone:ha}),(0,t.jsx)(Wt,{addUserVisible:F,setAddUserVisible:b,initUser:Be,searchContent:f}),(0,t.jsx)(Qt,{editUserVisible:A,setEditUserVisible:L,editUser:ie})]})},qt=st}}]);
