(self.webpackChunkant_design_pro=self.webpackChunkant_design_pro||[]).push([[9246],{952:function(Te,ne,e){"use strict";var $e=e(56640),Se=e.n($e),de=e(5894);ne.ZP=de.A},5894:function(Te,ne,e){"use strict";e.d(ne,{A:function(){return w}});var $e=e(9715),Se=e(86835),de=e(22122),g=e(67294),Ue=e(42489),Ie=e(96156),nt=e(49111),Ee=e(19650),V=e(84305),Me=e(88182),ze=e(28481),K=e(28991),st=e(8812),B=e(56725),se=e(53621),Y=e(94184),M=e.n(Y),x=e(66758),c=e(2514),Fe=e(96138),Q=g.forwardRef(function(G,f){var m=g.useContext(x.Z),le=m.groupProps,F=(0,K.Z)((0,K.Z)({},le),G),Ke=F.children,Je=F.collapsible,ke=F.defaultCollapsed,lt=F.style,He=F.labelLayout,ce=F.title,je=ce===void 0?G.label:ce,Ye=F.tooltip,Qe=F.align,k=Qe===void 0?"start":Qe,ot=F.direction,me=F.size,Xe=me===void 0?32:me,it=F.titleStyle,oe=F.titleRender,q=F.spaceProps,ye=F.extra,Pe=F.autoFocus,Tt=(0,B.Z)(function(){return ke||!1},{value:G.collapsed,onChange:G.onCollapse}),Ge=(0,ze.Z)(Tt,2),we=Ge[0],qe=Ge[1],It=(0,g.useContext)(Me.ZP.ConfigContext),De=It.getPrefixCls,ut=(0,c.z)(G),Ae=ut.ColWrapper,dt=ut.RowWrapper,ge=De("pro-form-group"),ie=Je&&g.createElement(st.Z,{style:{marginRight:8},rotate:we?void 0:90}),fe=g.createElement(se.Z,{label:ie?g.createElement("div",null,ie,je):je,tooltip:Ye}),Ce=(0,g.useCallback)(function(ee){var ve=ee.children;return g.createElement(Ee.Z,(0,de.Z)({},q,{className:M()("".concat(ge,"-container"),q==null?void 0:q.className),size:Xe,align:k,direction:ot,style:(0,K.Z)({rowGap:0},q==null?void 0:q.style)}),ve)},[k,ge,ot,Xe,q]),Oe=oe?oe(fe,G):fe,ct=(0,g.useMemo)(function(){var ee=[],ve=g.Children.toArray(Ke).map(function($,_e){var Le;return g.isValidElement($)&&($==null||(Le=$.props)===null||Le===void 0?void 0:Le.hidden)?(ee.push($),null):_e===0&&g.isValidElement($)&&Pe?g.cloneElement($,(0,K.Z)((0,K.Z)({},$.props),{},{autoFocus:Pe})):$});return[g.createElement(dt,{key:"children",Wrapper:Ce},ve),ee.length>0?g.createElement("div",{style:{display:"none"}},ee):null]},[Ke,dt,Ce,Pe]),_=(0,ze.Z)(ct,2),b=_[0],t=_[1];return g.createElement(Ae,null,g.createElement("div",{className:M()(ge,(0,Ie.Z)({},"".concat(ge,"-twoLine"),He==="twoLine")),style:lt,ref:f},t,(je||Ye||ye)&&g.createElement("div",{className:"".concat(ge,"-title"),style:it,onClick:function(){qe(!we)}},ye?g.createElement("div",{style:{display:"flex",width:"100%",alignItems:"center",justifyContent:"space-between"}},Oe,g.createElement("span",{onClick:function(ve){return ve.stopPropagation()}},ye)):Oe),Je&&we?null:b))});Q.displayName="ProForm-Group";var X=Q,We=e(7525);function w(G){return g.createElement(Ue.I,(0,de.Z)({layout:"vertical",submitter:{render:function(m,le){return le.reverse()}},contentRender:function(m,le){return g.createElement(g.Fragment,null,m,le)}},G))}w.Group=X,w.useForm=Se.Z.useForm,w.Item=We.Z},53621:function(Te,ne,e){"use strict";var $e=e(22385),Se=e(94199),de=e(96156),g=e(84305),Ue=e(88182),Ie=e(68628),nt=e(94184),Ee=e.n(nt),V=e(67294),Me=e(47369),ze=e.n(Me),K=function(B){var se=B.label,Y=B.tooltip,M=B.ellipsis,x=B.subTitle,c=(0,V.useContext)(Ue.ZP.ConfigContext),Fe=c.getPrefixCls;if(!Y&&!x)return V.createElement(V.Fragment,null,se);var Q=Fe("pro-core-label-tip"),X=typeof Y=="string"||V.isValidElement(Y)?{title:Y}:Y,We=(X==null?void 0:X.icon)||V.createElement(Ie.Z,null);return V.createElement("div",{className:Q,onMouseDown:function(G){return G.stopPropagation()},onMouseLeave:function(G){return G.stopPropagation()},onMouseMove:function(G){return G.stopPropagation()}},V.createElement("div",{className:Ee()("".concat(Q,"-title"),(0,de.Z)({},"".concat(Q,"-title-ellipsis"),M))},se),x&&V.createElement("div",{className:"".concat(Q,"-subtitle")},x),Y&&V.createElement(Se.Z,X,V.createElement("span",{className:"".concat(Q,"-icon")},We)))};ne.Z=V.memo(K)},45696:function(Te){Te.exports={standardList:"standardList___2ofmm",headerInfo:"headerInfo___3_diG",listContent:"listContent___2QxYD",listContentItem:"listContentItem___2mrYb",listContentItem2:"listContentItem2___36iA1",extraContentSearch:"extraContentSearch___1V5gc",listCard:"listCard___3ncDj",standardListForm:"standardListForm___3kWxp",formResult:"formResult___2OXrg"}},96138:function(){},56640:function(){},47369:function(){},42363:function(Te,ne,e){"use strict";e.r(ne),e.d(ne,{BasicList:function(){return Et},default:function(){return wt}});var $e=e(58024),Se=e(39144),de=e(54421),g=e(38272),Ue=e(94233),Ie=e(51890),nt=e(59250),Ee=e(13013),V=e(62350),Me=e(75443),ze=e(30887),K=e(28682),st=e(57663),B=e(71577),se=e(11849),Y=e(74379),M=e(38648),x=e(3182),c=e(2824);function Fe(D){throw new TypeError('"'+D+'" is read-only')}var Q=e(47673),X=e(4107),We=e(88983),w=e(47933),G=e(94043),f=e.n(G),m=e(67294),le=e(28991),F={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M484 443.1V528h-84.5c-4.1 0-7.5 3.1-7.5 7v42c0 3.8 3.4 7 7.5 7H484v84.9c0 3.9 3.2 7.1 7 7.1h42c3.9 0 7-3.2 7-7.1V584h84.5c4.1 0 7.5-3.2 7.5-7v-42c0-3.9-3.4-7-7.5-7H540v-84.9c0-3.9-3.1-7.1-7-7.1h-42c-3.8 0-7 3.2-7 7.1zm396-144.7H521L403.7 186.2a8.15 8.15 0 00-5.5-2.2H144c-17.7 0-32 14.3-32 32v592c0 17.7 14.3 32 32 32h736c17.7 0 32-14.3 32-32V330.4c0-17.7-14.3-32-32-32zM840 768H184V256h188.5l119.6 114.4H840V768z"}}]},name:"folder-add",theme:"outlined"},Ke=F,Je=e(27029),ke=function(r,n){return m.createElement(Je.Z,(0,le.Z)((0,le.Z)({},r),{},{ref:n,icon:Ke}))};ke.displayName="FolderAddOutlined";var lt=m.forwardRef(ke),He=e(59879),ce=e(43061),je=e(57254),Ye=e(63258),Qe=e(75362),k=e(21010),ot=e(30381),me=e(44586);function Xe(D){var r=Math.floor(D/1e3),n=Math.floor(r/31536e3);r=r-n*31536e3;var O=Math.floor(r/86400);r=r-O*86400;var T=Math.floor(r/3600);r=r-T*3600;var j=Math.floor(r/60);r=r-j*60;var P="";return r>0&&(P=r+" s"),j>0&&(P=j+" m "+P),T>0&&(P=T+" h "+P),O>0&&(P=O+" d "+P),n>0&&(P=n+" y "+P),P}function it(D,r){return D==null||r==null?null:r=="y"?D*31536e6:r=="d"?D*864e5:r=="h"?D*36e5:r=="m"?D*6e4:r=="s"?D*1e3:null}var oe={getStringFromMillisecond:Xe,getMillisecondFromTimeunit:it},q=e(66456),ye=e(24030),Pe=e(86582),Tt=e(22385),Ge=e(94199),we=e(49111),qe=e(19650),It=e(71153),De=e(60331),ut=e(9715),Ae=e(86835),dt=e(43358),ge=e(34041),ie=e(5966),fe=e(64317),Ce=e(37476),Oe=e(44545),ct=e(45696),_=e.n(ct),b=e(34224),t=e(85893),ee=function(r){var n=(0,k.YB)(),O=r.done,T=r.visible,j=r.current,P=r.setCurrent,U=r.onDone,pe=r.children,he=r.editable,Ze=r.setEditable,z=r.changeState,v=r.createable,Z=r.setCreateable,L=r.onDeleteItem,h=r.currentValue,N=r.searchTimeseries,I=r.searchContent,te=r.setSearchContent,y=r.pageTimeseriesShowTotal,Re=(0,k.tT)("@@initialState"),A=Re.initialState,Ft=Re.setInitialState,et=["BOOLEAN","INT32","INT64","FLOAT","DOUBLE","TEXT"],mt={BOOLEAN:["PLAIN","RLE"],INT32:["PLAIN","RLE","TS_2DIFF","GORILLA"],INT64:["PLAIN","RLE","TS_2DIFF","GORILLA"],FLOAT:["PLAIN","RLE","TS_2DIFF","GORILLA"],DOUBLE:["PLAIN","RLE","TS_2DIFF","GORILLA"],TEXT:["PLAIN"]},gt=ge.Z.Option,ft=Ae.Z.useForm(),Ve=(0,c.Z)(ft,2),Be=Ve[0],vt=Ve[1],pt=m.useState(void 0),Ne=(0,c.Z)(pt,2),J=Ne[0],H=Ne[1],ht=function(){var C=(0,x.Z)(f().mark(function p(E,ue,W){var xe,be,at;return f().wrap(function(R){for(;;)switch(R.prev=R.next){case 0:return R.prev=0,R.next=3,W.validateFields();case 3:return xe=W.getFieldValue("granularity2"),be=h+"."+(xe==null?"":xe+".")+W.getFieldValue("physical2"),R.next=7,(0,b.b2)({path:be,dataType:W.getFieldValue("dataType2"),encoding:W.getFieldValue("encoding2"),umi_locale:localStorage.getItem("umi_locale")});case 7:at=R.sent,at.code=="0"?M.default.success({message:"Add timeseries "+be+" success"}):M.default.error({message:at.message}),R.next=13;break;case 11:R.prev=11,R.t0=R.catch(0);case 13:case"end":return R.stop()}},p,null,[[0,11]])}));return function(E,ue,W){return C.apply(this,arguments)}}(),tt=[{title:n.formatMessage({id:"manageUser.privilege.granularity.entity"}),dataIndex:"granularity",key:"granularity",render:function(p){return(0,t.jsx)(t.Fragment,{children:(0,t.jsx)("div",{style:{width:300},children:h+"."+p})})}},{title:n.formatMessage({id:"manageUser.privilege.granularity.physical"}),dataIndex:"range",key:"range",render:function(p){return(0,t.jsx)(t.Fragment,{children:(0,t.jsx)("div",{style:{marginBottom:-10},children:p.toString().trim().split(",").map(function(E){return(0,t.jsx)("p",{children:E},E)})})})}},{title:n.formatMessage({id:"createStorageGroup.timeseries.dataType"}),dataIndex:"dataType",key:"dataType",render:function(p){return(0,t.jsx)(t.Fragment,{children:(0,t.jsxs)(De.Z,{children:[" ",p," "]})})}},{title:n.formatMessage({id:"createStorageGroup.timeseries.codeMode"}),dataIndex:"encoding",key:"encoding",render:function(p){return(0,t.jsx)(t.Fragment,{children:(0,t.jsxs)(De.Z,{children:[" ",p," "]})})}},{title:n.formatMessage({id:"query.sql.export.compressionMode"}),dataIndex:"compression",key:"compression",render:function(p){return(0,t.jsx)(t.Fragment,{children:(0,t.jsxs)(De.Z,{children:[" ",p," "]})})}},{title:n.formatMessage({id:"pages.operation.text"}),key:"action",render:function(p,E){return(0,t.jsx)(qe.Z,{size:"middle",children:(0,t.jsx)(Me.Z,{placement:"left",title:h+"."+E.granularity+"."+E.range+" -- "+n.formatMessage({id:"pages.delete.confirm"}),onConfirm:function(W){return L(E,W)},children:(0,t.jsx)("a",{children:n.formatMessage({id:"pages.delete.text"})})})})}}],St=[{title:n.formatMessage({id:"manageUser.privilege.granularity.entity"}),dataIndex:"granularity2",key:"granularity2",render:function(p){return(0,t.jsx)(t.Fragment,{children:(0,t.jsx)(ie.Z,{name:"granularity2",rules:[{required:!0,message:n.formatMessage({id:"createStorageGroup.entity.description"})},{message:"Between 1 to 1000 character",max:1e3},{pattern:/^(?!\.)[a-zA-Z0-9.\u4e00-\u9fa5_]+$/,message:n.formatMessage({id:"createStorageGroup.entity.rule"})}],fieldProps:{addonBefore:(0,t.jsx)(Ge.Z,{placement:"topLeft",arrowPointAtCenter:!0,title:"".concat(h,"."),children:(0,t.jsx)(Oe.Z,{})})},placeholder:n.formatMessage({id:"createStorageGroup.entity.description"})})})}},{title:n.formatMessage({id:"manageUser.privilege.granularity.physical"}),dataIndex:"physical2",key:"physical2",render:function(p){return(0,t.jsx)(t.Fragment,{children:(0,t.jsx)(ie.Z,{name:"physical2",rules:[{required:!0,message:n.formatMessage({id:"createStorageGroup.physical.description"})},{pattern:/^(?!_)[a-zA-Z0-9\u4e00-\u9fa5_]+$/,message:n.formatMessage({id:"createStorageGroup.physical.rule"})}],fieldProps:{},placeholder:n.formatMessage({id:"createStorageGroup.physical.description"})})})}},{title:n.formatMessage({id:"createStorageGroup.timeseries.dataType"}),dataIndex:"dataType2",key:"dataType2",render:function(p){return(0,t.jsx)(fe.Z,{name:"dataType2",rules:[{required:!0,message:n.formatMessage({id:"createStorageGroup.dataType.description"})}],options:et,fieldProps:{onChange:function(ue){H(ue),Be.setFieldsValue({encoding2:null})}}})}},{title:n.formatMessage({id:"createStorageGroup.timeseries.codeMode"}),dataIndex:"encoding2",key:"encoding2",render:function(p){return(0,t.jsx)(fe.Z,{name:"encoding2",rules:[{required:!0,message:n.formatMessage({id:"createStorageGroup.codeMode.description"})}],options:J==null?[]:mt[J],fieldProps:{}})}},{title:n.formatMessage({id:"pages.operation.text"}),key:"action2",render:function(p,E){return(0,t.jsx)(qe.Z,{size:"middle",style:{marginBottom:25},children:(0,t.jsx)("a",{onClick:function(W){ht(p,E,Be)},children:n.formatMessage({id:"pages.save.text"})})})}}];return T?(0,t.jsxs)(Ce.Y,{visible:T,form:Be,title:n.formatMessage({id:"createStorageGroup.timeseries.detail"})+" -- "+h,width:1200,className:_().standardListForm,initialValues:j,submitter:{submitButtonProps:{style:{display:"none"}},render:function(p,E){return[(0,t.jsx)(B.Z,{onClick:function(){Z(!v)},children:v?n.formatMessage({id:"pages.cancelAdd.text"}):n.formatMessage({id:"pages.add.text"})},"add")].concat((0,Pe.Z)(E))}},trigger:(0,t.jsx)(t.Fragment,{children:pe}),modalProps:{onCancel:function(){return U()},destroyOnClose:!0,bodyStyle:O?{padding:"72px 0"}:{}},children:[(0,t.jsx)("div",{style:{textAlign:"right",marginBottom:"10px",marginTop:"-10px"},children:(0,t.jsxs)(B.Z.Group,{children:[(0,t.jsxs)(B.Z,{value:"all",onClick:function(){te(null),N(h,"")},children:[(0,t.jsx)(He.Z,{}),n.formatMessage({id:"pages.refresh.text"})]}),(0,t.jsx)(X.Z.Search,{style:{width:400},placeholder:n.formatMessage({id:"createStorageGroup.timeseries.search.description"}),onSearch:function(p,E){E.preventDefault(),N(h,p)},onChange:function(p){te(p.target.value)},value:I,addonBefore:(0,t.jsx)(Ge.Z,{placement:"topLeft",arrowPointAtCenter:!0,title:"".concat(h,"."),children:(0,t.jsx)(Oe.Z,{})}),suffix:I==null||I==""?(0,t.jsx)(ce.Z,{style:{display:"none"}}):(0,t.jsx)(ce.Z,{style:{color:"rgba(0,0,0,.45)"},onClick:function(){te(null)}})})]})}),(0,t.jsx)(ye.Z,{columns:tt,dataSource:j,pagination:{showTotal:y,pageSize:10,showQuickJumper:!0}}),v==!0?(0,t.jsx)(ye.Z,{columns:St,dataSource:[{key:null,granularity2:null,auth2:null}],pagination:{hideOnSinglePage:!0}}):null]}):null},ve=ee,$=e(952),_e=e(31199),Le=function(r){var n=(0,k.YB)(),O=r.addModalVisible,T=r.setAddModalVisible,j=r.initItem,P=r.searchContent,U=r.onDone,pe=oe.getMillisecondFromTimeunit,he=Ae.Z.useForm(),Ze=(0,c.Z)(he,1),z=Ze[0];return O?(0,t.jsxs)(Ce.Y,{form:z,visible:O,title:n.formatMessage({id:"createStorageGroup.storageGroup.create"}),modalProps:{onCancel:function(){return T(!1)},destroyOnClose:!0,bodyStyle:O?{}:{padding:"72px 0"}},onFinish:function(){var v=(0,x.Z)(f().mark(function Z(L){var h,N,I;return f().wrap(function(y){for(;;)switch(y.prev=y.next){case 0:return y.prev=0,y.next=3,z.validateFields();case 3:return h=z.getFieldValue("ttl"),h!=null&&(N=z.getFieldValue("timeunit"),h=pe(h,N)),y.next=7,(0,b.it)({name:"root."+L.name,ttl:h,umi_locale:localStorage.getItem("umi_locale")});case 7:I=y.sent,I.code=="0"?(U(L),M.default.success({message:"Add Storage Group root."+L.name+" Success"}),T(!1)):M.default.error({message:I.message}),y.next=13;break;case 11:y.prev=11,y.t0=y.catch(0);case 13:case"end":return y.stop()}},Z,null,[[0,11]])}));return function(Z){return v.apply(this,arguments)}}(),children:[(0,t.jsx)(ie.Z,{name:"name",label:n.formatMessage({id:"createStorageGroup.storageGroup.name"}),rules:[{required:!0,message:"Between 1 to 255 character",max:255,type:"string"},{pattern:/^(?!\.)[a-zA-Z0-9.\u4e00-\u9fa5_]+$/,message:n.formatMessage({id:"createStorageGroup.entity.rule"})}],fieldProps:{addonBefore:"root.",style:{}}}),(0,t.jsxs)($.ZP.Group,{size:8,children:[(0,t.jsx)(_e.Z,{name:"ttl",label:n.formatMessage({id:"createStorageGroup.ttl.text"}),rules:[{min:0,max:925879189194932,type:"number"}],fieldProps:{style:{}}}),(0,t.jsx)(fe.Z,{label:n.formatMessage({id:"createStorageGroup.ttl.timeUnit"}),name:"timeunit",rules:[{validator:function(Z,L,h){if(z.getFieldValue("ttl")==null&&L!=null||z.getFieldValue("ttl")!=null&&L==null){h(n.formatMessage({id:"createStorageGroup.ttl.rule"}));return}h()}}],options:[{label:n.formatMessage({id:"createStorageGroup.ttl.second"}),value:"s"},{label:n.formatMessage({id:"createStorageGroup.ttl.minute"}),value:"m"},{label:n.formatMessage({id:"createStorageGroup.ttl.hour"}),value:"h"},{label:n.formatMessage({id:"createStorageGroup.ttl.day"}),value:"d"},{label:n.formatMessage({id:"createStorageGroup.ttl.year"}),value:"y"}],fieldProps:{style:{}}})]})]}):null},Ht=Le,Yt=function(r){var n=(0,k.YB)(),O=oe.getStringFromMillisecond,T=oe.getMillisecondFromTimeunit,j=r.editModalVisible,P=r.setEditModalVisible,U=r.editItem,pe=r.initItem,he=r.searchContent,Ze=r.onDone,z=Ae.Z.useForm(),v=(0,c.Z)(z,1),Z=v[0];return j?(0,t.jsxs)(Ce.Y,{form:Z,visible:j,title:n.formatMessage({id:"createStorageGroup.ttl.edit"}),modalProps:{onCancel:function(){return P(!1)},destroyOnClose:!0,bodyStyle:j?{}:{padding:"72px 0"}},onFinish:function(){var L=(0,x.Z)(f().mark(function h(N){var I,te,y;return f().wrap(function(A){for(;;)switch(A.prev=A.next){case 0:return A.prev=0,A.next=3,Z.validateFields();case 3:return I=Z.getFieldValue("ttl"),I!=null&&(te=Z.getFieldValue("timeunit"),I=T(I,te)),A.next=7,(0,b.CV)({name:U.value,ttl:I,umi_locale:localStorage.getItem("umi_locale")});case 7:y=A.sent,y.code=="0"?(console.log(N),Ze((0,se.Z)({name:U.value},N)),M.default.success({message:"Edit Storage Group "+U.value+" Success"}),P(!1)):M.default.error({message:y.message}),A.next=13;break;case 11:A.prev=11,A.t0=A.catch(0);case 13:case"end":return A.stop()}},h,null,[[0,11]])}));return function(h){return L.apply(this,arguments)}}(),children:[(0,t.jsx)(ie.Z,{name:"name",label:n.formatMessage({id:"createStorageGroup.storageGroup.name"}),fieldProps:{value:U.value,disabled:"disabled"}}),(0,t.jsx)(ie.Z,{label:n.formatMessage({id:"createStorageGroup.ttl.current"}),fieldProps:{defaultValue:O(U.ttl),disabled:"disabled",placeholder:n.formatMessage({id:"createStorageGroup.ttl.unlimited"})}}),(0,t.jsxs)($.ZP.Group,{size:8,children:[(0,t.jsx)(_e.Z,{name:"ttl",label:n.formatMessage({id:"createStorageGroup.ttl.new"})+" "+n.formatMessage({id:"createStorageGroup.ttl.new.description"}),rules:[{min:1,max:925879189194932,type:"number"}],fieldProps:{}}),(0,t.jsx)(fe.Z,{label:n.formatMessage({id:"createStorageGroup.ttl.timeUnit"}),name:"timeunit",rules:[{validator:function(h,N,I){if(Z.getFieldValue("ttl")==null&&N!=null||Z.getFieldValue("ttl")!=null&&N==null){I(n.formatMessage({id:"createStorageGroup.ttl.rule"}));return}I()}}],options:[{label:n.formatMessage({id:"createStorageGroup.ttl.second"}),value:"s"},{label:n.formatMessage({id:"createStorageGroup.ttl.minute"}),value:"m"},{label:n.formatMessage({id:"createStorageGroup.ttl.hour"}),value:"h"},{label:n.formatMessage({id:"createStorageGroup.ttl.day"}),value:"d"},{label:n.formatMessage({id:"createStorageGroup.ttl.year"}),value:"y"}],fieldProps:{}})]})]}):null},Qt=Yt,Ba=w.ZP.Button,Xt=X.Z.Search,Et=function(){var r=(0,k.YB)(),n=(0,m.useState)([]),O=(0,c.Z)(n,2),T=O[0],j=O[1],P=(0,m.useState)(void 0),U=(0,c.Z)(P,2),pe=U[0],he=U[1],Ze=(0,m.useState)([]),z=(0,c.Z)(Ze,2),v=z[0],Z=z[1],L=(0,m.useState)(!1),h=(0,c.Z)(L,2),N=h[0],I=h[1],te=(0,m.useState)(!1),y=(0,c.Z)(te,2),Re=y[0],A=y[1],Ft=(0,m.useState)(!1),et=(0,c.Z)(Ft,2),mt=et[0],gt=et[1],ft=(0,m.useState)(!1),Ve=(0,c.Z)(ft,2),Be=Ve[0],vt=Ve[1],pt=(0,m.useState)(void 0),Ne=(0,c.Z)(pt,2),J=Ne[0],H=Ne[1],ht=(0,m.useState)(void 0),tt=(0,c.Z)(ht,2),St=tt[0],C=tt[1],p=(0,m.useState)(void 0),E=(0,c.Z)(p,2),ue=E[0],W=E[1],xe=(0,k.tT)("@@initialState"),be=xe.initialState,at=xe.setInitialState,jt=(0,m.useState)(void 0),R=(0,c.Z)(jt,2),Pt=R[0],Na=R[1],qt=(0,m.useState)(void 0),Gt=(0,c.Z)(qt,2),_t=Gt[0],ba=Gt[1],ea=(0,m.useState)({}),Dt=(0,c.Z)(ea,2),ta=Dt[0],At=Dt[1],aa=(0,m.useState)(void 0),Ot=(0,c.Z)(aa,2),ra=Ot[0],na=Ot[1],sa=(0,m.useState)(!1),Lt=(0,c.Z)(sa,2),la=Lt[0],Rt=Lt[1],oa=(0,m.useState)(void 0),Vt=(0,c.Z)(oa,2),ae=Vt[0],Mt=Vt[1],ia=(0,m.useState)(void 0),Bt=(0,c.Z)(ia,2),ua=Bt[0],Nt=Bt[1],da=(0,m.useState)(!1),bt=(0,c.Z)(da,2),ca=bt[0],$t=bt[1],ma=(0,m.useState)(void 0),Ut=(0,c.Z)(ma,2),ga=Ut[0],zt=Ut[1],fa=(0,m.useState)(!1),Wt=(0,c.Z)(fa,2),va=Wt[0],yt=Wt[1],pa=(0,m.useState)(void 0),Kt=(0,c.Z)(pa,2),ha=Kt[0],Ct=Kt[1],Sa=oe.getStringFromMillisecond,Jt=oe.getMillisecondFromTimeunit,Zt=(0,k.QT)((0,x.Z)(f().mark(function d(){return f().wrap(function(a){for(;;)switch(a.prev=a.next){case 0:rt();case 1:case"end":return a.stop()}},d)}))),xt=Zt.data,Ma=Zt.loading,$a=Zt.mutate,ya=function(s){var a=s.data.timeseriesCount;return(0,t.jsx)("div",{className:_().listContent,children:(0,t.jsx)("div",{className:_().listContentItem2,children:(0,t.jsx)("p",{})})})},Ca=function(s){return ca?(0,t.jsx)("a",{onClick:Za,children:r.formatMessage({id:"pages.loading.continue"})}):null},Za=function(){var d=(0,x.Z)(f().mark(function s(){var a,o,i,u;return f().wrap(function(l){for(;;)switch(l.prev=l.next){case 0:return l.next=2,(0,b.aJ)({token:ga,umi_locale:localStorage.getItem("umi_locale")});case 2:if(a=l.sent,a.code=="0"){for(o=JSON.parse(a.message||"{}"),$t(o.hasMore),zt(o.token),i=v.length,u=0;u<a.data.length;u++)v[i+u]=a.data[u];ae!=null&&ae!=""&&v.filter(function(re){return re.value.match(ae)}),Fe("manageStorage"),j(T),Z(v)}else M.default.error({message:a.message});case 4:case"end":return l.stop()}},s)}));return function(){return d.apply(this,arguments)}}(),xa=function(s){return va?(0,t.jsx)("a",{onClick:Ta,children:r.formatMessage({id:"pages.loading.continue"})}):null},Ta=function(){var d=(0,x.Z)(f().mark(function s(){var a,o,i,u;return f().wrap(function(l){for(;;)switch(l.prev=l.next){case 0:return l.next=2,(0,b.kU)({token:ha,umi_locale:localStorage.getItem("umi_locale")});case 2:if(a=l.sent,a.code=="0"){for(o=JSON.parse(a.message||"{}"),yt(o.hasMore),Ct(o.token),i=J.length,u=0;u<a.data.length;u++)J[i+u]=a.data[u];H([]),H(J)}else M.default.error({message:a.message});case 4:case"end":return l.stop()}},s)}));return function(){return d.apply(this,arguments)}}(),Ua=(xt==null?void 0:xt.length)||1,Ia={showTotal:Ca,showQuickJumper:!0,pageSize:10,current:pe==null?1:pe,onChange:function(s,a){he(s)}},rt=function(){var d=(0,x.Z)(f().mark(function s(a){var o,i,u;return f().wrap(function(l){for(;;)switch(l.prev=l.next){case 0:return o=(0,me.Z)().replaceAll("-",""),l.next=3,(0,b.rk)({token:o,umi_locale:localStorage.getItem("umi_locale")});case 3:i=l.sent,i.code=="0"?(u=JSON.parse(i.message||"{}"),$t(u.hasMore),zt(u.token),a!=null&&a!=""&&(i.data=i.data.filter(function(re){return re.value.match(a)})),j(i.data),Z(i.data),he(1)):M.default.error({message:i.message});case 5:case"end":return l.stop()}},s)}));return function(a){return d.apply(this,arguments)}}(),kt=function(){var d=(0,x.Z)(f().mark(function s(a){var o;return f().wrap(function(u){for(;;)switch(u.prev=u.next){case 0:o=v,a!=null&&a!=""&&(o=o.filter(function(S){return S.value.match(a)})),j(o),he(1);case 4:case"end":return u.stop()}},s)}));return function(a){return d.apply(this,arguments)}}(),Ea=function(){var d=(0,x.Z)(f().mark(function s(a){var o,i,u;return f().wrap(function(l){for(;;)switch(l.prev=l.next){case 0:return Nt(null),o=(0,me.Z)().replaceAll("-",""),l.next=4,(0,b.t5)({path:a,token:o,umi_locale:localStorage.getItem("umi_locale")});case 4:i=l.sent,i.code=="0"?(u=JSON.parse(i.message||"{}"),yt(u.hasMore),Ct(u.token),H(i.data),W(a),vt(!0)):M.default.error({message:i.message});case 6:case"end":return l.stop()}},s)}));return function(a){return d.apply(this,arguments)}}(),Fa=function(){var d=(0,x.Z)(f().mark(function s(a,o){var i,u,S;return f().wrap(function(re){for(;;)switch(re.prev=re.next){case 0:return i=(0,me.Z)().replaceAll("-",""),re.next=3,(0,b.t5)({path:a+"."+o+"*",token:i,umi_locale:localStorage.getItem("umi_locale")});case 3:u=re.sent,u.code=="0"?(S=JSON.parse(u.message||"{}"),yt(S.hasMore),Ct(S.token),H(u.data)):M.default.error({message:u.message});case 5:case"end":return re.stop()}},s)}));return function(a,o){return d.apply(this,arguments)}}(),ja=function(s){s.preventDefault(),A(!0)},Pa=function(s,a,o){a[s.key]==null||a[s.key]==!1?(a[s.key]=!0,o((0,se.Z)({},a))):(a[s.key]=!1,o(a),o((0,se.Z)({},a)))},Ga=function(){var d=(0,x.Z)(f().mark(function s(a){var o,i,u;return f().wrap(function(l){for(;;)switch(l.prev=l.next){case 0:return l.next=2,(0,b.Zm)({name:a.value,umi_locale:localStorage.getItem("umi_locale")});case 2:if(o=l.sent,o.code!="0"){l.next=27;break}i=0;case 5:if(!(i<T.length)){l.next=12;break}if(T[i].value!=a.value){l.next=9;break}return T.splice(i,1),l.abrupt("break",12);case 9:i++,l.next=5;break;case 12:u=0;case 13:if(!(u<v.length)){l.next=20;break}if(v[u].value!=a.value){l.next=17;break}return v.splice(u,1),l.abrupt("break",20);case 17:u++,l.next=13;break;case 20:j([]),j(T),Z([]),Z(v),M.default.success({message:"Delete Storage Group "+a.value+" Success"}),l.next=28;break;case 27:M.default.error({message:o.message});case 28:case"end":return l.stop()}},s)}));return function(a){return d.apply(this,arguments)}}(),Da=(0,t.jsxs)(B.Z.Group,{children:[(0,t.jsxs)(B.Z,{value:"all",onClick:function(){Mt(null),rt()},children:[(0,t.jsx)(He.Z,{}),r.formatMessage({id:"pages.refresh.text"})]}),(0,t.jsx)(Xt,{className:_().extraContentSearch,placeholder:r.formatMessage({id:"pages.refresh.placeholder"}),onSearch:function(s){kt(s)},onChange:function(s){Mt(s.target.value)},value:ae,suffix:ae==null||ae==""?(0,t.jsx)(ce.Z,{style:{display:"none"}}):(0,t.jsx)(ce.Z,{style:{color:"rgba(0,0,0,.45)"},onClick:function(){Mt(null)}})})]}),Aa=function(s){var a=s.item;return(0,t.jsx)(Ee.Z,{trigger:["click"],overlay:(0,t.jsxs)(K.Z,{children:[(0,t.jsx)(K.Z.Item,{onClick:function(){na(a),gt(!0)},children:r.formatMessage({id:"createStorageGroup.ttl.edit"})},"edit"),(0,t.jsx)(Me.Z,{placement:"left",overlayStyle:{paddingRight:20},title:a.value+" -- "+r.formatMessage({id:"pages.delete.confirm"}),onConfirm:function(i){Ga(a)},children:(0,t.jsx)(K.Z.Item,{children:r.formatMessage({id:"pages.delete.text"})},"delete")})]}),children:(0,t.jsxs)("a",{children:[r.formatMessage({id:"pages.more.text"})," ",(0,t.jsx)(je.Z,{})]})})},Oa=function(s){var a={timeseriesCount:0,value:"root."+s.name,key:(0,me.Z)().replaceAll("-",""),ttl:Jt(s.ttl,s.timeunit)},o=v.length;v[o]=a,Z(v)},La=function(s){for(var a=0;a<v.length;a++)if(v[a].value==s.name){v[a].ttl=Jt(s.ttl,s.timeunit),Z(v);break}},Ra=function(){Pt==="success"&&kt(ae),I(!1),vt(!1),H({}),W(null),At({}),Rt(!1)},Va=function(){var d=(0,x.Z)(f().mark(function s(a){var o,i;return f().wrap(function(S){for(;;)switch(S.prev=S.next){case 0:return S.next=2,(0,b.mp)({path:a.timeseries,umi_locale:localStorage.getItem("umi_locale")});case 2:if(o=S.sent,o.code!="0"){S.next=17;break}M.default.success({message:"Delete timeseries "+a.timeseries+" success"}),i=0;case 6:if(!(i<J.length)){S.next=15;break}if(J[i].timeseries!=a.timeseries){S.next=12;break}return J.splice(i,1),H([]),H(J),S.abrupt("break",15);case 12:i++,S.next=6;break;case 15:S.next=18;break;case 17:M.default.error({message:o.message});case 18:case"end":return S.stop()}},s)}));return function(a){return d.apply(this,arguments)}}();return(0,t.jsxs)("div",{children:[(0,t.jsx)(Qe.ZP,{title:be.activeConnectionDesc,children:(0,t.jsx)("div",{className:_().standardList,children:(0,t.jsx)(Se.Z,{className:_().listCard,bordered:!1,title:null,style:{marginTop:24},bodyStyle:{padding:"0 32px 40px 32px"},extra:Da,children:(0,t.jsx)(g.ZP,{size:"large",rowKey:"id",loading:Ma,pagination:Ia,dataSource:T,renderItem:function(s){return(0,t.jsxs)(g.ZP.Item,{actions:[(0,t.jsx)("a",{onClick:function(o){Ea(s.value)},children:r.formatMessage({id:"createStorageGroup.timeseries.detail"})},"edit"),(0,t.jsx)(Aa,{item:s},"more")],children:[(0,t.jsx)(g.ZP.Item.Meta,{avatar:(0,t.jsx)(Ie.C,{style:{backgroundColor:"#FC4C2F"},icon:(0,t.jsx)(Ye.Z,{}),shape:"square",size:"large"}),title:s.value,description:s.ttl==null?"":r.formatMessage({id:"createStorageGroup.ttl.text"})+" "+Sa(s.ttl)}),(0,t.jsx)(ya,{data:s})]})}})})})}),(0,t.jsxs)(B.Z,{type:"dashed",onClick:function(s){ja(s,{})},style:{width:"100%",marginBottom:8},children:[(0,t.jsx)(lt,{}),r.formatMessage({id:"createStorageGroup.storageGroup.create"})]}),(0,t.jsx)(ve,{done:N,doneResultStatus:Pt,doneResultTitle:_t,visible:Be,current:J,setCurrent:H,currentFiltered:St,setCurrentFiltered:C,currentValue:ue,onDone:Ra,onDeleteItem:Va,editable:ta,setEditable:At,createable:la,setCreateable:Rt,changeState:Pa,searchContent:ua,setSearchContent:Nt,searchTimeseries:Fa,pageTimeseriesShowTotal:xa}),(0,t.jsx)(Ht,{addModalVisible:Re,setAddModalVisible:A,initItem:rt,searchContent:ae,onDone:Oa}),(0,t.jsx)(Qt,{editModalVisible:mt,setEditModalVisible:gt,editItem:ra,initItem:rt,searchContent:ae,onDone:La})]})},wt=Et}}]);
