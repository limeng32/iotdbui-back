(self.webpackChunkant_design_pro=self.webpackChunkant_design_pro||[]).push([[30],{81351:function(Ne){Ne.exports={standardList:"standardList___1iFxq",headerInfo:"headerInfo___2aqDv",listContent:"listContent___1IATF",listContentItem:"listContentItem___5bVCU",listContentItem2:"listContentItem2___2qaIk",extraContentSearch:"extraContentSearch___11gEB",listCard:"listCard___YcctT",standardListForm:"standardListForm___3g1HM",formResult:"formResult___2BFy5"}},30331:function(Ne,Ve,t){"use strict";t.r(Ve),t.d(Ve,{BasicList:function(){return ta},default:function(){return _a}});var yt=t(58024),Sa=t(39144),xt=t(54421),ve=t(38272),Zt=t(94233),Ca=t(51890),Et=t(59250),ya=t(13013),Mt=t(62350),ze=t(75443),jt=t(30887),pe=t(28682),Ut=t(57663),z=t(71577),Se=t(11849),Pt=t(74379),M=t(38648),P=t(3182),S=t(2824),It=t(47673),Ye=t(4107),Tt=t(88983),xa=t(47933),Za=t(94043),v=t.n(Za),g=t(67294),X=t(28991),Ea={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M824.2 699.9a301.55 301.55 0 00-86.4-60.4C783.1 602.8 812 546.8 812 484c0-110.8-92.4-201.7-203.2-200-109.1 1.7-197 90.6-197 200 0 62.8 29 118.8 74.2 155.5a300.95 300.95 0 00-86.4 60.4C345 754.6 314 826.8 312 903.8a8 8 0 008 8.2h56c4.3 0 7.9-3.4 8-7.7 1.9-58 25.4-112.3 66.7-153.5A226.62 226.62 0 01612 684c60.9 0 118.2 23.7 161.3 66.8C814.5 792 838 846.3 840 904.3c.1 4.3 3.7 7.7 8 7.7h56a8 8 0 008-8.2c-2-77-33-149.2-87.8-203.9zM612 612c-34.2 0-66.4-13.3-90.5-37.5a126.86 126.86 0 01-37.5-91.8c.3-32.8 13.4-64.5 36.3-88 24-24.6 56.1-38.3 90.4-38.7 33.9-.3 66.8 12.9 91 36.6 24.8 24.3 38.4 56.8 38.4 91.4 0 34.2-13.3 66.3-37.5 90.5A127.3 127.3 0 01612 612zM361.5 510.4c-.9-8.7-1.4-17.5-1.4-26.4 0-15.9 1.5-31.4 4.3-46.5.7-3.6-1.2-7.3-4.5-8.8-13.6-6.1-26.1-14.5-36.9-25.1a127.54 127.54 0 01-38.7-95.4c.9-32.1 13.8-62.6 36.3-85.6 24.7-25.3 57.9-39.1 93.2-38.7 31.9.3 62.7 12.6 86 34.4 7.9 7.4 14.7 15.6 20.4 24.4 2 3.1 5.9 4.4 9.3 3.2 17.6-6.1 36.2-10.4 55.3-12.4 5.6-.6 8.8-6.6 6.3-11.6-32.5-64.3-98.9-108.7-175.7-109.9-110.9-1.7-203.3 89.2-203.3 199.9 0 62.8 28.9 118.8 74.2 155.5-31.8 14.7-61.1 35-86.5 60.4-54.8 54.7-85.8 126.9-87.8 204a8 8 0 008 8.2h56.1c4.3 0 7.9-3.4 8-7.7 1.9-58 25.4-112.3 66.7-153.5 29.4-29.4 65.4-49.8 104.7-59.7 3.9-1 6.5-4.7 6-8.7z"}}]},name:"team",theme:"outlined"},Ma=Ea,He=t(27029),Je=function(r,s){return g.createElement(He.Z,(0,X.Z)((0,X.Z)({},r),{},{ref:s,icon:Ma}))};Je.displayName="TeamOutlined";var ja=g.forwardRef(Je),Ua={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M892 772h-80v-80c0-4.4-3.6-8-8-8h-48c-4.4 0-8 3.6-8 8v80h-80c-4.4 0-8 3.6-8 8v48c0 4.4 3.6 8 8 8h80v80c0 4.4 3.6 8 8 8h48c4.4 0 8-3.6 8-8v-80h80c4.4 0 8-3.6 8-8v-48c0-4.4-3.6-8-8-8zM373.5 498.4c-.9-8.7-1.4-17.5-1.4-26.4 0-15.9 1.5-31.4 4.3-46.5.7-3.6-1.2-7.3-4.5-8.8-13.6-6.1-26.1-14.5-36.9-25.1a127.54 127.54 0 01-38.7-95.4c.9-32.1 13.8-62.6 36.3-85.6 24.7-25.3 57.9-39.1 93.2-38.7 31.9.3 62.7 12.6 86 34.4 7.9 7.4 14.7 15.6 20.4 24.4 2 3.1 5.9 4.4 9.3 3.2 17.6-6.1 36.2-10.4 55.3-12.4 5.6-.6 8.8-6.6 6.3-11.6-32.5-64.3-98.9-108.7-175.7-109.9-110.8-1.7-203.2 89.2-203.2 200 0 62.8 28.9 118.8 74.2 155.5-31.8 14.7-61.1 35-86.5 60.4-54.8 54.7-85.8 126.9-87.8 204a8 8 0 008 8.2h56.1c4.3 0 7.9-3.4 8-7.7 1.9-58 25.4-112.3 66.7-153.5 29.4-29.4 65.4-49.8 104.7-59.7 3.8-1.1 6.4-4.8 5.9-8.8zM824 472c0-109.4-87.9-198.3-196.9-200C516.3 270.3 424 361.2 424 472c0 62.8 29 118.8 74.2 155.5a300.95 300.95 0 00-86.4 60.4C357 742.6 326 814.8 324 891.8a8 8 0 008 8.2h56c4.3 0 7.9-3.4 8-7.7 1.9-58 25.4-112.3 66.7-153.5C505.8 695.7 563 672 624 672c110.4 0 200-89.5 200-200zm-109.5 90.5C690.3 586.7 658.2 600 624 600s-66.3-13.3-90.5-37.5a127.26 127.26 0 01-37.5-91.8c.3-32.8 13.4-64.5 36.3-88 24-24.6 56.1-38.3 90.4-38.7 33.9-.3 66.8 12.9 91 36.6 24.8 24.3 38.4 56.8 38.4 91.4-.1 34.2-13.4 66.3-37.6 90.5z"}}]},name:"usergroup-add",theme:"outlined"},Pa=Ua,Qe=function(r,s){return g.createElement(He.Z,(0,X.Z)((0,X.Z)({},r),{},{ref:s,icon:Pa}))};Qe.displayName="UsergroupAddOutlined";var Ia=g.forwardRef(Qe),We=t(59879),ne=t(43061),Ta=t(57254),Ra=t(75362),Y=t(21010),Rt=t(30381),Fa=t(44586),Ft=t(66456),Ke=t(24030),Aa=t(86582),At=t(49111),Xe=t(19650),Ot=t(71153),Oa=t(60331),kt=t(63185),qe=t(9676),Dt=t(9715),Ce=t(86835),bt=t(43358),ka=t(34041),Da=t(64317),q=t(5966),_e=t(22122),ba=t(81253),Ga=t(22270),wa=t(64893),$a=t(64473),Ba=["options","fieldProps","proFieldProps","valueEnum"],La=g.forwardRef(function(f,r){var s=f.options,l=f.fieldProps,j=f.proFieldProps,b=f.valueEnum,G=(0,ba.Z)(f,Ba);return g.createElement($a.Z,(0,_e.Z)({ref:r,valueType:"checkbox",mode:"edit",valueEnum:(0,Ga.h)(b,void 0),fieldProps:(0,X.Z)({options:s},l),proFieldProps:j},G))}),Na=g.forwardRef(function(f,r){var s=f.fieldProps,l=f.children;return g.createElement(qe.Z,(0,_e.Z)({ref:r},s),l)}),Va=(0,wa.G)(Na,{valuePropName:"checked"}),ea=Va;ea.Group=La;var aa=ea,ye=t(37476),za=t(81351),_=t.n(za),D=t(34224),e=t(85893),Ya=Ye.Z.Search,Ha=function(r){var s=(0,Y.YB)(),l=r.done,j=r.visible,b=r.current,G=r.onDone,$=r.children,I=r.editable,F=r.setEditable,B=r.changeState,A=r.createable,O=r.setCreateable,L=r.onSaveAuth,E=r.onDeleteAuth,x=r.currentUser,je=r.tosave,se=r.unsave,Ue=r.pagePrivilegesShowTotal,Pe=r.pagePrivilegesHasMore,ra=r.pagePrivilegesAppend,ie=r.currentFiltered,na=r.setCurrentFiltered,le=r.refresh,Ie=r.search,H=r.searchContent,ue=r.setSearchContent,oe=r.onAddDone,h=["SET_STORAGE_GROUP","INSERT_TIMESERIES","READ_TIMESERIES","CREATE_TIMESERIES","DELETE_TIMESERIES","CREATE_USER","DELETE_USER","MODIFY_PASSWORD","LIST_USER","GRANT_USER_PRIVILEGE","REVOKE_USER_PRIVILEGE","CREATE_FUNCTION","DROP_FUNCTION","CREATE_TRIGGER","DROP_TRIGGER","START_TRIGGER","STOP_TRIGGER"],k=["INSERT_TIMESERIES","READ_TIMESERIES","CREATE_TIMESERIES","DELETE_TIMESERIES"],sa=ka.Z.Option,de=Ce.Z.useForm(),Te=(0,S.Z)(de,1),T=Te[0],Re=g.useState(void 0),ee=(0,S.Z)(Re,2),w=ee[0],ae=ee[1],ce=g.useState(void 0),ge=(0,S.Z)(ce,2),Fe=ge[0],te=ge[1],me=g.useState(void 0),re=(0,S.Z)(me,2),fe=re[0],J=re[1],he=function(c){te(null),J(null),ae(c)},Ae=function(){var y=(0,P.Z)(v().mark(function c(m,Z,p){var ke,Q,W;return v().wrap(function(R){for(;;)switch(R.prev=R.next){case 0:return R.prev=0,R.next=3,p.validateFields();case 3:return ke="root",R.next=6,(0,D.PU)({user:x,auth:fe,timeseries:Fe,umi_locale:localStorage.getItem("umi_locale")});case 6:Q=R.sent,Q.code=="0"?(W=JSON.parse(Q.message||"{}"),oe(W),M.default.success({message:W.range+' add "'+W.success+'" success'})):M.default.error({message:Q.message}),R.next=12;break;case 10:R.prev=10,R.t0=R.catch(0);case 12:case"end":return R.stop()}},c,null,[[0,10]])}));return function(m,Z,p){return y.apply(this,arguments)}}(),ia=[{title:s.formatMessage({id:"manageUser.privilege.level"}),dataIndex:"depth",key:"depth",render:function(c){return(0,e.jsx)(e.Fragment,{children:c})}},{title:s.formatMessage({id:"manageUser.privilege.range"}),dataIndex:"range",key:"range",render:function(c){return(0,e.jsx)(e.Fragment,{children:(0,e.jsx)("div",{style:{marginBottom:-10},children:c.toString().trim().split(",").map(function(m){return(0,e.jsx)("p",{children:m},m)})})})}},{title:s.formatMessage({id:"manageUser.privilege.auth"}),key:"auth",dataIndex:"auth",render:function(c,m){return I[m.key]==!0?(0,e.jsx)(e.Fragment,{children:(0,e.jsx)(qe.Z.Group,{defaultValue:c,options:m.range=="root"?h:k,onChange:function(p){m.auth=p}})}):(0,e.jsx)(e.Fragment,{children:c.map(function(Z){return(0,e.jsx)(Oa.Z,{children:Z},Z)})})}},{title:s.formatMessage({id:"pages.operation.text"}),key:"action",render:function(c,m){return(0,e.jsxs)(Xe.Z,{size:"middle",children:[I[m.key]==!0?(0,e.jsx)("a",{onClick:function(p){L(m,p)},children:s.formatMessage({id:"pages.save.text"})}):(0,e.jsx)("a",{onClick:function(p){je(c,I,F)},children:s.formatMessage({id:"pages.edit.text"})}),I[m.key]==!0?(0,e.jsx)("a",{onClick:function(p){se(c,I,F)},children:s.formatMessage({id:"pages.cancel.text"})}):(0,e.jsx)(ze.Z,{placement:"left",title:m.range+" -- "+s.formatMessage({id:"manageUser.privilege.delete.confirm"}),onConfirm:function(p){return E(m,p)},children:(0,e.jsx)("a",{children:s.formatMessage({id:"pages.delete.text"})})})]})}}],Oe=[{title:s.formatMessage({id:"manageUser.privilege.granularity"}),dataIndex:"granularity2",key:"granularity2",render:function(c,m){return(0,e.jsx)(Da.Z,{name:"granularity2",rules:[{required:!0,message:s.formatMessage({id:"pages.required.text"})}],options:[{label:s.formatMessage({id:"manageUser.privilege.granularity.connection"}),value:"connection"},{label:s.formatMessage({id:"manageUser.privilege.granularity.timeseries"}),value:"timeseries"}],fieldProps:{onChange:function(p){he(p),m.granularity2=p},value:w,style:{width:100}},placeholder:s.formatMessage({id:"pages.choose.placeholder"})})}},{title:s.formatMessage({id:"manageUser.privilege.range"}),dataIndex:"range2",key:"range2",render:function(c,m){return w=="timeseries"?(0,e.jsx)(q.Z,{name:"range2",rules:[{required:!0,message:"Between 1 to 255 character",max:255,type:"string"},{pattern:/^(?!\.)[a-zA-Z0-9.\u4e00-\u9fa5_]+$/,message:s.formatMessage({id:"createStorageGroup.entity.rule"})}],onChange:function(p){te(p.target.value)},fieldProps:{value:Fe,addonBefore:"root.",style:{width:300}}}):null}},{title:s.formatMessage({id:"manageUser.privilege.auth"}),key:"auth2",dataIndex:"auth2",render:function(c,m){return(0,e.jsx)("div",{style:{},children:w==null?null:w=="connection"?(0,e.jsx)(aa.Group,{defaultValue:c,options:h,onChange:function(p){m.auth2=p,J(p)},fieldProps:{value:fe},name:"auth2",rules:[{required:!0,message:s.formatMessage({id:"manageUser.privilege.auth.required"}),type:"array"}]}):(0,e.jsx)(aa.Group,{defaultValue:c,options:k,onChange:function(p){m.auth2=p,J(p)},fieldProps:{value:fe},name:"auth3",rules:[{required:!0,message:s.formatMessage({id:"manageUser.privilege.auth.required"}),type:"array"}]})})}},{title:s.formatMessage({id:"pages.operation.text"}),key:"action2",render:function(c,m){return(0,e.jsx)(Xe.Z,{size:"middle",children:(0,e.jsx)("a",{onClick:function(p){Ae(c,m,T)},children:s.formatMessage({id:"pages.save.text"})})})}}];return j?(0,e.jsxs)(ye.Y,{visible:j,form:T,title:s.formatMessage({id:"manageUser.privilege.detail"})+" -- "+x,className:_().standardListForm,submitter:{submitButtonProps:{style:{display:"none"}},render:function(c,m){return[(0,e.jsx)(z.Z,{onClick:function(){ae(null),te(null),J([]),O(!A)},children:A?s.formatMessage({id:"pages.cancelAdd.text"}):s.formatMessage({id:"pages.add.text"})},"add")].concat((0,Aa.Z)(m))}},trigger:(0,e.jsx)(e.Fragment,{children:$}),modalProps:{onCancel:function(){return G()},destroyOnClose:!0,bodyStyle:l?{padding:"72px 0"}:{}},children:[(0,e.jsx)("div",{style:{textAlign:"right",marginBottom:"10px",marginTop:"-10px"},children:(0,e.jsxs)(z.Z.Group,{children:[(0,e.jsxs)(z.Z,{value:"all",onClick:function(){le()},children:[(0,e.jsx)(We.Z,{}),s.formatMessage({id:"pages.refresh.text"})]}),(0,e.jsx)(Ya,{className:_().extraContentSearch,placeholder:s.formatMessage({id:"pages.refresh.placeholder"}),onSearch:function(c){Ie(c)},onChange:function(c){ue(c.target.value)},value:H,suffix:H==null||H==""?(0,e.jsx)(ne.Z,{style:{display:"none"}}):(0,e.jsx)(ne.Z,{style:{color:"rgba(0,0,0,.45)"},onClick:function(){ue(null)}})})]})}),(0,e.jsx)(Ke.Z,{columns:ia,dataSource:ie,pagination:{pageSize:10,showQuickJumper:!0,showTotal:Ue}}),A==!0?(0,e.jsx)(Ke.Z,{columns:Oe,dataSource:[{key:null,granularity2:null,auth2:null}],pagination:{hideOnSinglePage:!0}}):null]}):null},Ja=Ha,Qa=function(r){var s=(0,Y.YB)(),l=r.addUserVisible,j=r.setAddUserVisible,b=r.initUser,G=r.searchContent,$=Ce.Z.useForm(),I=(0,S.Z)($,1),F=I[0];return l?(0,e.jsxs)(ye.Y,{form:F,visible:l,title:s.formatMessage({id:"manageUser.create.title"}),modalProps:{onCancel:function(){return j(!1)},destroyOnClose:!0,bodyStyle:l?{}:{padding:"72px 0"}},onFinish:function(){var B=(0,P.Z)(v().mark(function A(O){var L;return v().wrap(function(x){for(;;)switch(x.prev=x.next){case 0:return x.prev=0,x.next=3,F.validateFields();case 3:return x.next=5,(0,D.fU)({user:O.userName,password:O.userPassword,umi_locale:localStorage.getItem("umi_locale")});case 5:L=x.sent,L.code=="0"?(b(G),M.default.success({message:"Add User "+O.userName+" Success"}),j(!1)):M.default.error({message:L.message}),x.next=11;break;case 9:x.prev=9,x.t0=x.catch(0);case 11:case"end":return x.stop()}},A,null,[[0,9]])}));return function(A){return B.apply(this,arguments)}}(),children:[(0,e.jsx)(q.Z,{name:"userName",label:s.formatMessage({id:"manageUser.create.username"}),rules:[{required:!0,message:"Between 4 to 255 character",min:4,max:255,type:"string"}]}),(0,e.jsx)(q.Z.Password,{name:"userPassword",label:s.formatMessage({id:"manageUser.create.password"}),rules:[{required:!0,message:"Between 4 to 255 character",min:4,max:255,type:"string"}]})]}):null},Wa=Qa,Ka=function(r){var s=(0,Y.YB)(),l=r.editUserVisible,j=r.setEditUserVisible,b=r.editUser,G=Ce.Z.useForm(),$=(0,S.Z)(G,1),I=$[0];return l?(0,e.jsxs)(ye.Y,{form:I,visible:l,title:s.formatMessage({id:"manageUser.edit.title"}),modalProps:{onCancel:function(){return j(!1)},destroyOnClose:!0,bodyStyle:l?{}:{padding:"72px 0"}},onFinish:function(){var F=(0,P.Z)(v().mark(function B(A){var O;return v().wrap(function(E){for(;;)switch(E.prev=E.next){case 0:return E.prev=0,E.next=3,I.validateFields();case 3:return E.next=5,(0,D.gL)({user:b.user,password:A.userPassword,umi_locale:localStorage.getItem("umi_locale")});case 5:O=E.sent,O.code=="0"?(M.default.success({message:"Edit User "+A.userName+" Success"}),j(!1)):M.default.error({message:O.message}),E.next=11;break;case 9:E.prev=9,E.t0=E.catch(0);case 11:case"end":return E.stop()}},B,null,[[0,9]])}));return function(B){return F.apply(this,arguments)}}(),children:[(0,e.jsx)(q.Z,{label:s.formatMessage({id:"manageUser.create.username"}),fieldProps:{defaultValue:b.user,disabled:"disabled"},rules:[{required:!0,message:"Between 4 to 255 character",min:4,max:255,type:"string"}]}),(0,e.jsx)(q.Z.Password,{name:"userPassword",label:s.formatMessage({id:"manageUser.create.password"}),rules:[{required:!0,message:"Between 4 to 255 character",min:4,max:255,type:"string"}]})]}):null},Xa=Ka;function Gt(f){return xe.apply(this,arguments)}function xe(){return xe=_asyncToGenerator(_regeneratorRuntime.mark(function f(r){return _regeneratorRuntime.wrap(function(l){for(;;)switch(l.prev=l.next){case 0:return l.abrupt("return",request("/api/get_list",{params:r}));case 1:case"end":return l.stop()}},f)})),xe.apply(this,arguments)}function wt(f){return Ze.apply(this,arguments)}function Ze(){return Ze=_asyncToGenerator(_regeneratorRuntime.mark(function f(r){return _regeneratorRuntime.wrap(function(l){for(;;)switch(l.prev=l.next){case 0:return l.abrupt("return",request("/api/post_fake_list",{method:"POST",data:_objectSpread(_objectSpread({},r),{},{method:"delete"})}));case 1:case"end":return l.stop()}},f)})),Ze.apply(this,arguments)}function $t(f){return Ee.apply(this,arguments)}function Ee(){return Ee=_asyncToGenerator(_regeneratorRuntime.mark(function f(r){return _regeneratorRuntime.wrap(function(l){for(;;)switch(l.prev=l.next){case 0:return l.abrupt("return",request("/api/post_fake_list",{method:"POST",data:_objectSpread(_objectSpread({},r),{},{method:"post"})}));case 1:case"end":return l.stop()}},f)})),Ee.apply(this,arguments)}function Bt(f){return Me.apply(this,arguments)}function Me(){return Me=_asyncToGenerator(_regeneratorRuntime.mark(function f(r){return _regeneratorRuntime.wrap(function(l){for(;;)switch(l.prev=l.next){case 0:return l.abrupt("return",request("/api/post_fake_list",{method:"POST",data:_objectSpread(_objectSpread({},r),{},{method:"update"})}));case 1:case"end":return l.stop()}},f)})),Me.apply(this,arguments)}var Lt=xa.ZP.Button,qa=Ye.Z.Search,Nt=function(r){var s=r.data,l=s.createTime,j=s.username;return _jsxs("div",{className:styles.listContent,children:[_jsxs("div",{className:styles.listContentItem,children:[_jsx("p",{children:"\u7528\u6237\u540D"}),_jsx("p",{children:j})]}),_jsxs("div",{className:styles.listContentItem2,children:[_jsx("p",{children:"\u521B\u5EFA\u65F6\u95F4"}),_jsx("p",{children:moment(parseInt(l)).format("YYYY-MM-DD HH:mm")})]})]})},ta=function(){var r=(0,Y.YB)(),s=(0,g.useState)(void 0),l=(0,S.Z)(s,2),j=l[0],b=l[1],G=(0,g.useState)(void 0),$=(0,S.Z)(G,2),I=$[0],F=$[1],B=(0,g.useState)(!1),A=(0,S.Z)(B,2),O=A[0],L=A[1],E=(0,g.useState)(!1),x=(0,S.Z)(E,2),je=x[0],se=x[1],Ue=(0,g.useState)(!1),Pe=(0,S.Z)(Ue,2),ra=Pe[0],ie=Pe[1],na=(0,g.useState)(!1),le=(0,S.Z)(na,2),Ie=le[0],H=le[1],ue=(0,g.useState)(void 0),oe=(0,S.Z)(ue,2),h=oe[0],k=oe[1],sa=(0,g.useState)(void 0),de=(0,S.Z)(sa,2),Te=de[0],T=de[1],Re=(0,g.useState)(void 0),ee=(0,S.Z)(Re,2),w=ee[0],ae=ee[1],ce=(0,Y.tT)("@@initialState"),ge=ce.initialState,Fe=ce.setInitialState,te=(0,g.useState)(void 0),me=(0,S.Z)(te,2),re=me[0],fe=me[1],J=(0,g.useState)(void 0),he=(0,S.Z)(J,2),Ae=he[0],ia=he[1],Oe=(0,g.useState)({}),y=(0,S.Z)(Oe,2),c=y[0],m=y[1],Z=(0,g.useState)(void 0),p=(0,S.Z)(Z,2),ke=p[0],Q=p[1],W=(0,g.useState)(!1),De=(0,S.Z)(W,2),R=De[0],la=De[1],et=(0,g.useState)(void 0),ua=(0,S.Z)(et,2),K=ua[0],be=ua[1],at=(0,g.useState)(!1),oa=(0,S.Z)(at,2),da=oa[0],ca=oa[1],tt=(0,g.useState)(void 0),ga=(0,S.Z)(tt,2),rt=ga[0],ma=ga[1],nt=(0,g.useState)(void 0),fa=(0,S.Z)(nt,2),N=fa[0],ha=fa[1],Ge=(0,Y.QT)((0,P.Z)(v().mark(function d(){return v().wrap(function(a){for(;;)switch(a.prev=a.next){case 0:$e();case 1:case"end":return a.stop()}},d)}))),we=Ge.data,st=Ge.loading,Vt=Ge.mutate,zt=(we==null?void 0:we.length)||1,it={showQuickJumper:!0,pageSize:10,current:I==null?1:I,onChange:function(n,a){F(n)}},lt=function(n){return da?(0,e.jsx)("a",{onClick:va,children:r.formatMessage({id:"pages.loading.continue"})}):null},va=function(){var d=(0,P.Z)(v().mark(function n(){var a,i,o,u;return v().wrap(function(U){for(;;)switch(U.prev=U.next){case 0:return U.next=2,(0,D.M_)({token:rt,umi_locale:localStorage.getItem("umi_locale")});case 2:if(a=U.sent,a.code=="0"){for(i=JSON.parse(a.message||"{}"),ca(i.hasMore),ma(i.token),a.data.filter(function(V){V.authOrigin=V.auth}),o=h.length,u=0;u<a.data.length;u++)h[o+u]=a.data[u];k([]),k(h),T([]),N!=null&&N!=""?T(h.filter(function(V){return V.range.match(N)})):T(h)}else M.default.error({message:a.message});case 4:case"end":return U.stop()}},n)}));return function(){return d.apply(this,arguments)}}(),$e=function(){var d=(0,P.Z)(v().mark(function n(a){var i;return v().wrap(function(u){for(;;)switch(u.prev=u.next){case 0:return u.next=2,(0,D.uj)({umi_locale:localStorage.getItem("umi_locale")});case 2:i=u.sent,i.code=="0"?(a!=null&&a!=""&&(i.data=i.data.filter(function(C){return C.user.match(a)})),b(i.data),F(1)):M.default.error({message:i.message});case 4:case"end":return u.stop()}},n)}));return function(a){return d.apply(this,arguments)}}(),Be=function(){var d=(0,P.Z)(v().mark(function n(a){var i;return v().wrap(function(u){for(;;)switch(u.prev=u.next){case 0:return u.next=2,(0,D.uj)({umi_locale:localStorage.getItem("umi_locale")});case 2:i=u.sent,i.code=="0"?(a!=null&&a!=""&&(i.data=i.data.filter(function(C){return C.user.match(a)})),b(i.data),F(1)):M.default.error({message:i.message});case 4:case"end":return u.stop()}},n)}));return function(a){return d.apply(this,arguments)}}(),ut=function(){var d=(0,P.Z)(v().mark(function n(a){var i;return v().wrap(function(u){for(;;)switch(u.prev=u.next){case 0:return u.next=2,pa(a.user);case 2:i=u.sent,i.code=="0"&&(ae(a.user),H(!0));case 4:case"end":return u.stop()}},n)}));return function(a){return d.apply(this,arguments)}}(),ot=function(n){n.preventDefault(),se(!0)},Le=function(n,a,i){a[n.key]==null||a[n.key]==!1?(a[n.key]=!0,i((0,Se.Z)({},a))):(a[n.key]=!1,i((0,Se.Z)({},a)))},dt=function(n,a,i){n.authOrigin=n.auth,Le(n,a,i)},ct=function(n,a,i){n.auth=n.authOrigin,Le(n,a,i)},gt=function(){var d=(0,P.Z)(v().mark(function n(a){var i;return v().wrap(function(u){for(;;)switch(u.prev=u.next){case 0:return u.next=2,(0,D.o1)({user:a.user,umi_locale:localStorage.getItem("umi_locale")});case 2:i=u.sent,i.code=="0"?($e(K),M.default.success({message:"Delete User "+a.user+" Success"})):M.default.error({message:i.message});case 4:case"end":return u.stop()}},n)}));return function(a){return d.apply(this,arguments)}}(),mt=(0,e.jsxs)(z.Z.Group,{children:[(0,e.jsxs)(z.Z,{value:"all",onClick:function(){be(null),Be()},children:[(0,e.jsx)(We.Z,{}),r.formatMessage({id:"pages.refresh.text"})]}),(0,e.jsx)(qa,{className:_().extraContentSearch,placeholder:r.formatMessage({id:"pages.refresh.placeholder"}),onSearch:function(n){Be(n)},onChange:function(n){be(n.target.value)},value:K,suffix:K==null||K==""?(0,e.jsx)(ne.Z,{style:{display:"none"}}):(0,e.jsx)(ne.Z,{style:{color:"rgba(0,0,0,.45)"},onClick:function(){be(null)}})})]}),ft=function(n){var a=n.item;return(0,e.jsx)(ya.Z,{trigger:["click"],overlay:(0,e.jsxs)(pe.Z,{children:[(0,e.jsx)(pe.Z.Item,{onClick:function(){Q(a),ie(!0)},children:r.formatMessage({id:"pages.edit.text"})},"edit"),(0,e.jsx)(ze.Z,{placement:"left",overlayStyle:{paddingRight:20},title:a.user+" -- "+r.formatMessage({id:"pages.delete.confirm"}),onConfirm:function(o){gt(a)},okText:"\u662F",cancelText:"\u5426",children:(0,e.jsx)(pe.Z.Item,{children:r.formatMessage({id:"pages.delete.text"})},"delete")})]}),children:(0,e.jsxs)("a",{children:[r.formatMessage({id:"pages.more.text"})," ",(0,e.jsx)(Ta.Z,{})]})})},ht=function(){re==="success"&&Be(K),L(!1),H(!1),k([]),ae(null),m({}),la(!1)},vt=function(){var d=(0,P.Z)(v().mark(function n(a){var i,o;return v().wrap(function(C){for(;;)switch(C.prev=C.next){case 0:return C.next=2,(0,D.Gn)({user:w,range:a.range,umi_locale:localStorage.getItem("umi_locale")});case 2:if(i=C.sent,i.code!="0"){C.next=18;break}o=0;case 5:if(!(o<h.length)){C.next=16;break}if(h[o].range!=a.range){C.next=13;break}return h.splice(o,1),k([]),k(h),T([]),N!=null&&N!=""?T(h.filter(function(U){return U.range.match(N)})):T(h),C.abrupt("break",16);case 13:o++,C.next=5;break;case 16:C.next=19;break;case 18:M.default.error({message:i.message});case 19:case"end":return C.stop()}},n)}));return function(a){return d.apply(this,arguments)}}(),pt=function(){var d=(0,P.Z)(v().mark(function n(a,i){var o;return v().wrap(function(C){for(;;)switch(C.prev=C.next){case 0:return C.next=2,(0,D.Gn)({user:w,auth:a.auth,range:a.range,umi_locale:localStorage.getItem("umi_locale")});case 2:o=C.sent,o.code=="0"?(c[a.key]=!1,m((0,Se.Z)({},c))):M.default.error({message:o.message});case 4:case"end":return C.stop()}},n)}));return function(a,i){return d.apply(this,arguments)}}(),pa=function(){var d=(0,P.Z)(v().mark(function n(a){var i,o,u;return v().wrap(function(U){for(;;)switch(U.prev=U.next){case 0:return ha(null),i=(0,Fa.Z)().replaceAll("-",""),U.next=4,(0,D.f9)({user:a==null?w:a,token:i,umi_locale:localStorage.getItem("umi_locale")});case 4:return o=U.sent,o.code=="0"?(u=JSON.parse(o.message||"{}"),ca(u.hasMore),ma(u.token),o.data.filter(function(V){V.authOrigin=V.auth}),k(o.data),T(o.data)):M.default.error({message:o.message}),U.abrupt("return",o);case 7:case"end":return U.stop()}},n)}));return function(a){return d.apply(this,arguments)}}(),St=function(){var d=(0,P.Z)(v().mark(function n(a){return v().wrap(function(o){for(;;)switch(o.prev=o.next){case 0:T([]),T(h.filter(function(u){return u.range.match(a)}));case 2:case"end":return o.stop()}},n)}));return function(a){return d.apply(this,arguments)}}(),Ct=function(n){for(var a=0;a<h.length;a++)if(h[a].range==n.range){h[a].auth.push.apply(h[a].auth,n.success),h[a].authOrigin.push.apply(h[a].authOrigin,n.success),h[a].auth=h[a].auth.reduce(function(i,o){return i.indexOf(o)===-1&&i.push(o),i},[]),h[a].authOrigin=h[a].authOrigin.reduce(function(i,o){return i.indexOf(o)===-1&&i.push(o),i},[]),k([]),k(h);break}};return(0,e.jsxs)("div",{children:[(0,e.jsx)(Ra.ZP,{title:ge.activeConnectionDesc,children:(0,e.jsx)("div",{className:_().standardList,children:(0,e.jsx)(Sa.Z,{className:_().listCard,bordered:!1,title:null,style:{marginTop:24},bodyStyle:{padding:"0 32px 40px 32px"},extra:mt,children:(0,e.jsx)(ve.ZP,{size:"large",rowKey:"id",loading:st,pagination:it,dataSource:j,renderItem:function(n){return(0,e.jsx)(ve.ZP.Item,{actions:[(0,e.jsx)("a",{onClick:function(){ut(n)},children:r.formatMessage({id:"manageUser.privilege.detail"})},"edit"),(0,e.jsx)(ft,{item:n},"more")],children:(0,e.jsx)(ve.ZP.Item.Meta,{avatar:(0,e.jsx)(Ca.C,{style:{backgroundColor:"#FC4C2F"},icon:(0,e.jsx)(ja,{}),shape:"square",size:"large"}),title:n.user,description:null})})}})})})}),(0,e.jsxs)(z.Z,{type:"dashed",onClick:function(n){ot(n,{})},style:{width:"100%",marginBottom:8},children:[(0,e.jsx)(Ia,{}),r.formatMessage({id:"manageUser.create.title"})]}),(0,e.jsx)(Ja,{done:O,doneResultStatus:re,doneResultTitle:Ae,visible:Ie,current:h,currentFiltered:Te,setCurrentFiltered:T,currentUser:w,onDone:ht,onSaveAuth:pt,onDeleteAuth:vt,editable:c,setEditable:m,createable:R,setCreateable:la,changeState:Le,tosave:dt,unsave:ct,pagePrivilegesShowTotal:lt,pagePrivilegesHasMore:da,pagePrivilegesAppend:va,refresh:pa,search:St,searchContent:N,setSearchContent:ha,onAddDone:Ct}),(0,e.jsx)(Wa,{addUserVisible:je,setAddUserVisible:se,initUser:$e,searchContent:K}),(0,e.jsx)(Xa,{editUserVisible:ra,setEditUserVisible:ie,editUser:ke})]})},_a=ta}}]);
